{"meta":{"title":"Daemon","subtitle":null,"description":"å°‘å¹´å¿ƒæ€§å²å²é•¿ï¼Œä½•å¿…è™šæ·æƒŠå’Œæ…Œ","author":"Daemon","url":"https://shixiong.name","root":"/"},"pages":[{"title":"buddy","date":"2019-02-26T05:47:12.000Z","updated":"2019-08-19T07:17:21.504Z","comments":true,"path":"buddy/index.html","permalink":"https://shixiong.name/buddy/index.html","excerpt":"","text":"* Colinâ€™s Nest* Vong* Punmy* ç»†è¯­å‘¢å–ƒ* æ –è¿Ÿäºä¸€ä¸˜* B1ueW01f* å¿˜å½’* è¿›é˜¶è€…* LIZIMEOWâ€™S BLOG&gt; ğŸ¤™ æ’åä¸åˆ†å…ˆå"},{"title":"å‹æƒ…é“¾æ¥","date":"2019-08-19T07:18:52.299Z","updated":"2019-07-30T02:17:17.772Z","comments":false,"path":"links/index.html","permalink":"https://shixiong.name/links/index.html","excerpt":"","text":""},{"title":"about","date":"2018-11-21T13:09:38.000Z","updated":"2019-07-30T02:17:17.771Z","comments":true,"path":"about/index.html","permalink":"https://shixiong.name/about/index.html","excerpt":"","text":""},{"title":"å” å¨","date":"2019-07-30T02:17:17.773Z","updated":"2019-07-30T02:17:17.773Z","comments":false,"path":"nag/index.html","permalink":"https://shixiong.name/nag/index.html","excerpt":"","text":"[2018-12-06 00:45] æ‰€è°“åˆ›æ–°ï¼Œå…¶å®å¹¶ä¸å¤æ‚ï¼Œè¿™ä¸ªæ—¶ä»£ï¼Œç®€å•æœ¬èº«å°±æ˜¯æœ€å¥½çš„åˆ›æ–°ã€‚ [2018-12-06 00:40] å°è¯´ã€Šå»19å·æˆ¿é—´ã€‹é‡Œçš„å¦»å­ï¼Œå‘ç°è‡ªå·±å‡ºç°äº†åŒçƒ¦å®¶åº­ç”Ÿæ´»çš„æ—¶åˆ»ã€‚äºæ˜¯ï¼Œä¾¿åœ¨æˆ¿å­é‡Œè¾Ÿå‡ºäº†ä¸€ä¸ªç‹¬å¤„çš„æˆ¿é—´ï¼Œä¹Ÿè·Ÿå®¶é‡Œäººçº¦å®šå¥½è¿™ä¸ªç©ºé—´åªå±äºè‡ªå·±ã€‚ä½†æ²¡å¤šä¹…ï¼Œå®¶äººå®Œå…¨å¿˜äº†è¿™ä¸ªçº¦å®šï¼Œå¼€å§‹åœ¨è¿™ä¸ªæˆ¿é—´é‡Œè¿›è¿›å‡ºå‡ºã€‚åæ¥è¿™ä½å¦»å­åœ¨å®¾é¦†é‡Œç§Ÿäº†ä¸ªæˆ¿é—´ä½œä¸ºä¸ªäººç§å¯†ç©ºé—´ï¼Œå³ä½¿è¢«è¯¯ä¼šå¤–é‡ä¹Ÿä¸è‚¯è¯´å‡ºçœŸç›¸ã€‚å…¶å®æ¯ä¸ªäººï¼Œéƒ½æœ‰å±äºè‡ªå·±çš„19å·æˆ¿é—´ã€‚å†äº²å¯†çš„äººä¹Ÿå¸Œæœ›ä»–èƒ½åœ¨é—¨å‰æ­¢æ­¥ï¼Œä¿æŒç•Œé™æ„Ÿã€‚å¯å¾€å¾€å¾ˆå¤šäººå¯¹ç•Œé™æ„Ÿå¹¶æ²¡æœ‰æ¸…æ™°çš„è®¤è¯†ï¼Œä¸€ä¸å°å¿ƒå°±è¶Šäº†ç•Œã€‚ [2018-12-06 00:37] ç¤¾äº¤çš„èµ·å› åœ¨äºäººä»¬ç”Ÿæ´»çš„å•è°ƒå’Œç©ºè™šã€‚ç¤¾äº¤çš„éœ€è¦é©±ä½¿ä»–ä»¬æ¥åˆ°ä¸€èµ·ï¼Œä½†å„è‡ªå…·æœ‰çš„è®¸å¤šä»¤äººåŒæ†çš„å“è¡Œåˆé©±ä½¿ä»–ä»¬åˆ†å¼€ã€‚ [2018-12-05 13:44] å½±å“åŠ›çš„å¦ä¸€ä¸ªé‡è¦æ„ä¹‰æ˜¯ï¼Œå½“ä»–äººè®¤ä¸ºä½ æ˜¯ï¼ˆå°†æˆä¸ºï¼‰è¯¥é¢†åŸŸçš„é‡è¦æˆå‘˜ï¼Œä»–ä»¬æ‰ä¼šæ„¿æ„ç»™ä¸ä½ æœºä¼šæˆ–æ˜¯èµ„æºã€‚äº’è”ç½‘è¡Œä¸šäººå‘˜æµåŠ¨æ€§å¾ˆå¤§ï¼Œå¾€å¾€ä»Šå¤©å¯¹æ¥çš„äººæ˜å¤©ç¦»èŒå°±ä¸çŸ¥æ‰€è¸ªäº†ï¼Œè¿™æ ·çš„æƒ…å†µæ²¡æœ‰äººåŸå› ä»˜å‡ºå¤ªå¤šç²¾åŠ›å’Œæ—¶é—´å…³æ³¨ä½ çš„æˆé•¿ï¼Œæ›´ä¸å¯èƒ½ç»™äºˆä½ å®é™…æ€§çš„æœºä¼šã€‚è®©åˆ«äººæ„è¯†åˆ°ï¼Œä½ ä¼šé•¿ä¹…çš„å‘†åœ¨äº’è”ç½‘è¡Œä¸šï¼Œæˆä¸ºæ ¸å¿ƒæˆå‘˜åªæ˜¯æ—¶é—´é—®é¢˜ï¼Œå¤§å®¶å°±ä¸ä¼šè½»è§†ä½ ï¼Œå¹¶æ„¿æ„åœ¨æ—©æœŸå¯¹ä½ è¿›è¡ŒæŠ•èµ„ã€‚ [2018-11-22 23:30] å¯ä»¥ï¼å¤§åŠŸå‘Šæˆï¼:yum: [2018-11-22 23:29] è¯•è¯•å€’åºå‘å¸ƒ~ [2018-11-22 22:05] ç»ˆäºæŠŠbotå¼„å¥½äº†ï¼Œä»¥åå¯ä»¥ç›´æ¥åœ¨slacké‡Œå‘ä¸œè¥¿ï¼Œbotå°±ä¼šè‡ªåŠ¨å°†å†…å®¹å‘å¸ƒåˆ°git-pagesä¸Šï¼Œç„¶åé¡ºä¾¿æŠŠä»£ç pushåˆ°gitä¸Šã€‚è‡ªåŠ¨åŒ–çš„é­…åŠ›çœŸæ˜¯å¤ªè¿·äººäº†.. [2018.11.22 15.50] æµ‹è¯•ä¸€ä¸‹ã€‚ [2018.11.22 15:48] æäº†ä¸ªè®°å½•ç¢ç¢å¿µçš„åœ°æ–¹ã€‚"}],"posts":[{"title":"ä¸€ä¸ªå¥‡æ€ªçš„æ—‹è½¬é—®é¢˜","slug":"find-a-wierd-bug","date":"2019-07-30T02:24:32.000Z","updated":"2019-07-31T08:41:19.847Z","comments":true,"path":"2019/07/30/find-a-wierd-bug/","link":"","permalink":"https://shixiong.name/2019/07/30/find-a-wierd-bug/","excerpt":"","text":"ç°è±¡æœ€è¿‘å‘ç°ä¸€ä¸ªå¾ˆç¥å¥‡çš„bugï¼ŒåŠ å…¥æŸä¸ªä¼šè®®ä¹‹åç„¶åé€€å‡ºï¼Œé‡å¤3æ¬¡ï¼Œç•Œé¢å°±æ— æ³•æ—‹è½¬äº†ã€‚ çŒœæµ‹çŒœæµ‹1âƒ£ï¸æ— æ³•æ—‹è½¬ï¼Œåœ¨ç¡®è®¤æ—‹è½¬é”å®šå…³é—­çš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæƒ³æ³•æ˜¯ï¼Œçœ‹çœ‹support orientation ç›¸å…³çš„å‡½æ•°è¿”å›å€¼æ˜¯å¦æ­£ç¡®ã€‚ 12345func application(_ application: UIApplication, supportedInterfaceOrientationsFor window: UIWindow?) -&gt; UIInterfaceOrientationMaskopen override var shouldAutorotate: Bool open override var supportedInterfaceOrientations: UIInterfaceOrientationMask äºæ˜¯æ‰“äº†ä¸‰ä¸ªå…¨å±€æ–­ç‚¹ï¼Œä¸€ä¸ªä¸€ä¸ªè°ƒè¯•â€¦ æœä¸å…¶ç„¶â€¦éƒ½æ²¡ä»€ä¹ˆé—®é¢˜â€¦ ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªç°è±¡ï¼Œå½“å‡ºç°bugï¼ˆå³æ— æ³•æ—‹è½¬ï¼‰çš„æ—¶å€™ï¼Œè¿™äº›å‡½æ•°éƒ½ä¸ä¼šè¢«è°ƒç”¨äº†ã€‚ çŒœæµ‹2âƒ£ï¸å¦‚æœä¸æ˜¯æ”¯æŒæ–¹å‘ä¸å¯¹çš„è¯ï¼Œå›å¤´çœ‹äº†ä¸€ä¸‹ç°è±¡ï¼šé‡å¤ä¸‰æ¬¡â€¦äºæ˜¯ç»§ç»­çŒœæµ‹ï¼Œä¼šä¸ä¼šè·Ÿå†…å­˜æ³„æ¼æœ‰å…³ï¼Œä¹‹å‰æœ‰é‡åˆ°è¿‡å†…å­˜ç›¸å…³é—®é¢˜çš„ç°è±¡ä¹Ÿæ˜¯é‡å¤æ“ä½œnæ¬¡å‡ºç°ã€‚ äºæ˜¯è°ƒè¯•äº†ä¸€ä¸‹â€¦ æœä¸å…¶ç„¶â€¦è¿˜æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜â€¦ å¯»æ‰¾æ€è·¯å‰é¢çš„çŒœæµ‹éƒ½ä¸å¯¹ï¼Œä¸€ä¸‹å­å°±æ‡µé€¼äº†ï¼Œæ¯«æ— å¤´ç»ªã€‚åæ¥ä»”ç»†æƒ³äº†æƒ³ï¼Œè¦ä¸è¯•è¯•ä»ç³»ç»Ÿæ¥å£æ‰¾æ‰¾é—®é¢˜ï¼Œæ—¢ç„¶è¦æ—‹è½¬ï¼Œæœ€åè‚¯å®šä¼šè½åœ°åˆ°ç³»ç»Ÿå±‚é¢çš„æŸä¸ªæ–¹æ³•ä¸Šã€‚ äºæ˜¯æ‰“äº†ä¸ªæ–­ç‚¹åœ¨ -[UIViewController shouldAutorotate] å½“è®¾å¤‡å¯ä»¥æ—‹è½¬çš„æ—¶å€™ï¼Œè°ƒç”¨æ ˆå¦‚ä¸‹: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1 * frame #0: 0x00000001d039de80 UIKitCore`-[UIViewController shouldAutorotate] frame #1: 0x00000001d039f8b8 UIKitCore`-[UIViewController _updateLastKnownInterfaceOrientationOnPresentionStack:] + 144 frame #2: 0x00000001d03a0e84 UIKitCore`-[UIViewController window:willAnimateRotationToInterfaceOrientation:duration:newSize:] + 92 frame #3: 0x00000001d03a8270 UIKitCore`__95-[UIViewController(AdaptiveSizing) _window:viewWillTransitionToSize:withTransitionCoordinator:]_block_invoke.3392 + 48 frame #4: 0x00000001d03af570 UIKitCore`-[_UIViewControllerTransitionCoordinator _applyBlocks:releaseBlocks:] + 264 frame #5: 0x00000001d03abb64 UIKitCore`-[_UIViewControllerTransitionContext __runAlongsideAnimations] + 176 frame #6: 0x00000001d0da7f40 UIKitCore`+[UIView(UIViewAnimationWithBlocks) _setupAnimationWithDuration:delay:view:options:factory:animations:start:animationStateGenerator:completion:] + 608 frame #7: 0x00000001d0da8480 UIKitCore`+[UIView(UIViewAnimationWithBlocks) animateWithDuration:delay:options:animations:completion:] + 108 frame #8: 0x000000010710a74c Glip`+[UIView(instrumentation) ADEumAnimateWithDuration:delay:options:animations:completion:] + 300 frame #9: 0x00000001d03c29e8 UIKitCore`__58-[_UIWindowRotationAnimationController animateTransition:]_block_invoke_2 + 308 frame #10: 0x00000001d0dac560 UIKitCore`+[UIView(Internal) _performBlockDelayingTriggeringResponderEvents:] + 220 frame #11: 0x00000001d03c2778 UIKitCore`__58-[_UIWindowRotationAnimationController animateTransition:]_block_invoke + 128 frame #12: 0x00000001d0da7f40 UIKitCore`+[UIView(UIViewAnimationWithBlocks) _setupAnimationWithDuration:delay:view:options:factory:animations:start:animationStateGenerator:completion:] + 608 frame #13: 0x00000001d0da8480 UIKitCore`+[UIView(UIViewAnimationWithBlocks) animateWithDuration:delay:options:animations:completion:] + 108 frame #14: 0x000000010710a74c Glip`+[UIView(instrumentation) ADEumAnimateWithDuration:delay:options:animations:completion:] + 300 frame #15: 0x00000001d03c2650 UIKitCore`-[_UIWindowRotationAnimationController animateTransition:] + 456 frame #16: 0x00000001d0968398 UIKitCore`-[UIWindow _rotateToBounds:withAnimator:transitionContext:] + 580 frame #17: 0x00000001d096aafc UIKitCore`-[UIWindow _rotateWindowToOrientation:updateStatusBar:duration:skipCallbacks:] + 1184 frame #18: 0x00000001d096b1b0 UIKitCore`-[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 516 frame #19: 0x00000001d096a5b0 UIKitCore`-[UIWindow _setRotatableViewOrientation:updateStatusBar:duration:force:] + 128 frame #20: 0x00000001d096925c UIKitCore`__57-[UIWindow _updateToInterfaceOrientation:duration:force:]_block_invoke + 124 frame #21: 0x00000001d0969160 UIKitCore`-[UIWindow _updateToInterfaceOrientation:duration:force:] + 560 frame #22: 0x00000001a43595bc CoreFoundation`__CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 20 frame #23: 0x00000001a4359588 CoreFoundation`___CFXRegistrationPost_block_invoke + 64 frame #24: 0x00000001a4358a7c CoreFoundation`_CFXRegistrationPost + 392 frame #25: 0x00000001a4358728 CoreFoundation`___CFXNotificationPost_block_invoke + 96 frame #26: 0x00000001a42d2524 CoreFoundation`-[_CFXNotificationRegistrar find:object:observer:enumerator:] + 1496 frame #27: 0x00000001a43581d8 CoreFoundation`_CFXNotificationPost + 696 frame #28: 0x00000001a4d40814 Foundation`-[NSNotificationCenter postNotificationName:object:userInfo:] + 68 frame #29: 0x00000001d05c2030 UIKitCore`-[UIDevice setOrientation:animated:] + 328 frame #30: 0x00000001d01f071c UIKitCore`__124-[_UICanvasDeviceOrientationSettingsDiffAction _updateDeviceOrientationWithSettingObserverContext:canvas:transitionContext:]_block_invoke + 88 frame #31: 0x00000001d01f2304 UIKitCore`_performChangesWithTransitionContext + 836 frame #32: 0x00000001d01f0688 UIKitCore`-[_UICanvasDeviceOrientationSettingsDiffAction _updateDeviceOrientationWithSettingObserverContext:canvas:transitionContext:] + 236 frame #33: 0x00000001d01f058c UIKitCore`__133-[_UICanvasDeviceOrientationSettingsDiffAction performActionsForCanvas:withUpdatedScene:settingsDiff:fromSettings:transitionContext:]_block_invoke + 104 frame #34: 0x00000001d01f1fb0 UIKitCore`_performActionsWithDelayForTransitionContext + 112 frame #35: 0x00000001d01f04e0 UIKitCore`-[_UICanvasDeviceOrientationSettingsDiffAction performActionsForCanvas:withUpdatedScene:settingsDiff:fromSettings:transitionContext:] + 172 frame #36: 0x00000001d01f5d84 UIKitCore`-[_UICanvas scene:didUpdateWithDiff:transitionContext:completion:] + 360 frame #37: 0x00000001d05253b8 UIKitCore`-[UIApplicationSceneClientAgent scene:handleEvent:withCompletion:] + 464 frame #38: 0x00000001a6d63920 FrontBoardServices`__80-[FBSSceneImpl updater:didUpdateSettings:withDiff:transitionContext:completion:]_block_invoke_3 + 224 frame #39: 0x00000001356e4c74 libdispatch.dylib`_dispatch_client_callout + 16 frame #40: 0x00000001356e8840 libdispatch.dylib`_dispatch_block_invoke_direct + 232 frame #41: 0x00000001a6d9d0bc FrontBoardServices`__FBSSERIALQUEUE_IS_CALLING_OUT_TO_A_BLOCK__ + 40 frame #42: 0x00000001a6d9cd58 FrontBoardServices`-[FBSSerialQueue _performNext] + 408 frame #43: 0x00000001a6d9d310 FrontBoardServices`-[FBSSerialQueue _performNextFromRunLoopSource] + 52 frame #44: 0x00000001a437a2bc CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 24 frame #45: 0x00000001a437a23c CoreFoundation`__CFRunLoopDoSource0 + 88 frame #46: 0x00000001a4379b24 CoreFoundation`__CFRunLoopDoSources0 + 176 frame #47: 0x00000001a4374a60 CoreFoundation`__CFRunLoopRun + 1004 frame #48: 0x00000001a4374354 CoreFoundation`CFRunLoopRunSpecific + 436 frame #49: 0x00000001a657479c GraphicsServices`GSEventRunModal + 104 frame #50: 0x00000001d092bb68 UIKitCore`UIApplicationMain + 212 frame #51: 0x000000010525d370 Glip`main at AppDelegate.swift:67:7 frame #52: 0x00000001a3e3a8e0 libdyld.dylib`start + 4 æœ€åé€šè¿‡æ–­ç‚¹å®šä½ï¼Œå‘ç°é—®é¢˜å‡ºåœ¨ 12345678frame #22: 0x00000001a43595bc CoreFoundation`__CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 20frame #23: 0x00000001a4359588 CoreFoundation`___CFXRegistrationPost_block_invoke + 64frame #24: 0x00000001a4358a7c CoreFoundation`_CFXRegistrationPost + 392frame #25: 0x00000001a4358728 CoreFoundation`___CFXNotificationPost_block_invoke + 96frame #26: 0x00000001a42d2524 CoreFoundation`-[_CFXNotificationRegistrar find:object:observer:enumerator:] + 1496frame #27: 0x00000001a43581d8 CoreFoundation`_CFXNotificationPost + 696frame #28: 0x00000001a4d40814 Foundation`-[NSNotificationCenter postNotificationName:object:userInfo:] + 68frame #29: 0x00000001d05c2030 UIKitCore`-[UIDevice setOrientation:animated:] + 328 ä¸è®ºAPPæ˜¯å¦æ”¯æŒæ—‹è½¬ï¼Œ[UIDevice setOrientation:animated:] éƒ½ä¼šè°ƒç”¨ï¼Œä¸”å‚æ•°å€¼ä¹Ÿæ˜¯å¯¹çš„ã€‚å…³é”®åœ¨äºä¸‹ä¸€æ­¥ï¼Œå½“APPæ”¯æŒæ—‹è½¬çš„æ—¶å€™ï¼Œä¼šå‘å‡ºä¸€ä¸ªUIDeviceOrientationDidChangeNotification é€šçŸ¥ï¼Œä¸æ”¯æŒæ—‹è½¬çš„æ—¶å€™å°±ä¸ä¼šã€‚ äºæ˜¯é—®é¢˜å°±è½¬åŒ–æˆäº†ï¼šä»€ä¹ˆæƒ…å†µä¸‹ï¼Œç³»ç»Ÿæœ‰å¯èƒ½ä¼šä¸å‘å‡º UIDeviceOrientationDidChangeNotification é€šçŸ¥å‘¢ï¼Ÿ é‡äº‹ä¸å†³ï¼Œçœ‹æ–‡æ¡£ã€‚ åœ¨ UIDevice.h ä¸­æ‰¾åˆ°è¿™ä¸‰ä¸ªç©æ„å„¿ 123@property(nonatomic,readonly,getter=isGeneratingDeviceOrientationNotifications) BOOL generatesDeviceOrientationNotifications __TVOS_PROHIBITED;- (void)beginGeneratingDeviceOrientationNotifications __TVOS_PROHIBITED; // nestable- (void)endGeneratingDeviceOrientationNotifications __TVOS_PROHIBITED; çœ‹ç€åº”è¯¥å°±æ˜¯ç½ªé­ç¥¸é¦–äº†ã€‚ å®šä½é—®é¢˜è°ƒè¯•å‘ç°ï¼Œåœ¨APPæ”¯æŒæ—‹è½¬æ—¶ isGeneratingDeviceOrientationNotifications = trueï¼›ä¸æ”¯æŒæ—¶ isGeneratingDeviceOrientationNotifications=falseã€‚ æŸ¥çœ‹ generatesDeviceOrientationNotifications æ–‡æ¡£ï¼š If the value of this property is YES, the shared UIDevice object posts a UIDeviceOrientationDidChangeNotification notification when the device changes orientation. If the value is NO, it generates no orientation notifications. Device orientation notifications can only be generated between calls to the beginGeneratingDeviceOrientationNotifications and endGeneratingDeviceOrientationNotifications methods. æŸ¥çœ‹ beginGeneratingDeviceOrientationNotifications æ–‡æ¡£ï¼š You must call this method before attempting to get orientation data from the receiver. This method enables the deviceâ€™s accelerometer hardware and begins the delivery of acceleration events to the receiver. The receiver subsequently uses these events to post UIDeviceOrientationDidChangeNotification notifications when the device orientation changes and to update the orientation property.You may nest calls to this method safely, but you should always match each call with a corresponding call to the endGeneratingDeviceOrientationNotifications method. æ‰€ä»¥ isGeneratingDeviceOrientationNotifications çš„å€¼æ˜¯å—å¦å¤–ä¸¤ä¸ªæ–¹æ³•å½±å“çš„ã€‚ çœ‹æ¥å·²ç»æ‰¾åˆ°åŸå› äº† ç»§ç»­è°ƒè¯•å‘ç°ï¼Œé¡¹ç›®ä»£ç å†…éƒ¨å¹¶æ²¡æœ‰è°ƒç”¨åˆ° beginGeneratingDeviceOrientationNotifications å’Œ endGeneratingDeviceOrientationNotificationsã€‚ ç»“è®ºå½“ -[UIWindow setRootViewController:]çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ beginGeneratingDeviceOrientationNotificationsï¼Œå½“ -[UIWindow dealloc] æ—¶ï¼Œä¼šè°ƒç”¨ endGeneratingDeviceOrientationNotificationsï¼Œè¿™ä¹ˆçœ‹ç³»ç»Ÿçš„è¿™ä¸ªé€»è¾‘æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ã€‚é—®é¢˜å‡ºåœ¨äº WebRTC ä¸­ï¼Œåœ¨ start video session çš„æ—¶å€™æœ‰è°ƒç”¨ beginGeneratingDeviceOrientationNotificationsï¼Œstop video session çš„æ—¶å€™æœ‰è°ƒç”¨ endGeneratingDeviceOrientationNotificationsã€‚ä½†æ˜¯CoreLibé‡Œçš„ä»£ç æœ‰ç‚¹é—®é¢˜ï¼Œstart video session çš„æ—¶å€™å¹¶æ²¡æœ‰è°ƒç”¨ beginGeneratingDeviceOrientationNotifications ï¼Œå¯¼è‡´è¿™ä¸¤ä¸ªæ²¡æœ‰æˆå¯¹å‡ºç°ï¼Œä»è€Œå‡ºé”™ã€‚ ä»¥å‰æ²¡æœ‰ç‰¹åˆ«å…³æ³¨è¿‡è¿™ä¸‰è€…ï¼š 123@property(nonatomic,readonly,getter=isGeneratingDeviceOrientationNotifications) BOOL generatesDeviceOrientationNotifications __TVOS_PROHIBITED;- (void)beginGeneratingDeviceOrientationNotifications __TVOS_PROHIBITED; // nestable- (void)endGeneratingDeviceOrientationNotifications __TVOS_PROHIBITED; ä»¥åé‡åˆ°æ—‹è½¬é—®é¢˜ï¼Œåˆå¤šäº†ä¸€æ¡æ€è·¯äº†..","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://shixiong.name/tags/iOS/"},{"name":"Orientation","slug":"Orientation","permalink":"https://shixiong.name/tags/Orientation/"}]},{"title":"ã€è¯‘ã€‘å†™ç»™è‡ªå·±çš„è½¯ä»¶å·¥ç¨‹ç¬”è®°","slug":"note-to-myself-on-software-engineering","date":"2019-03-29T08:53:45.000Z","updated":"2019-07-30T02:17:17.770Z","comments":true,"path":"2019/03/29/note-to-myself-on-software-engineering/","link":"","permalink":"https://shixiong.name/2019/03/29/note-to-myself-on-software-engineering/","excerpt":"","text":"è¿™æ˜¯ Keras çš„å¼€å‘è€… FranÃ§ois Chollet æ•´ç†çš„ç¬”è®°ï¼Œé‡Œé¢æœ‰å¾ˆå¤šæ€è€ƒå€¼å¾—å­¦ä¹ ã€‚åŸæ–‡é“¾æ¥ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ ä»£ç ä¸ä»…ä»…æ„å‘³ç€è¦è¢«æ‰§è¡Œçš„ã€‚ä»£ç ä¹Ÿæ˜¯å›¢é˜Ÿä¹‹é—´çš„æ²Ÿé€šæ–¹å¼ï¼Œæ˜¯å‘ä»–äººæè¿°é—®é¢˜è§£å†³æ–¹æ¡ˆçš„ä¸€ç§æ–¹å¼ã€‚ï¼ˆå†™å‡ºï¼‰å…·æœ‰è¾ƒé«˜å¯è¯»æ€§çš„ä»£ç ä¸æ˜¯ä¸€ä»¶å€¼å¾—éª„å‚²çš„äº‹æƒ…ï¼Œå®ƒæ˜¯ç¼–å†™ä»£ç æœ€åŸºç¡€çš„éƒ¨åˆ†äº†ã€‚è¿™å…¶ä¸­åŒ…æ‹¬æ¸…æ¥šåœ°åˆ†è§£ä»£ç ï¼Œé€‰æ‹©ä¸è¨€è‡ªæ˜çš„å˜é‡åï¼Œå¹¶æ’å…¥åˆé€‚çš„æ³¨é‡Šæ¥æè¿°éšå«çš„ä»»ä½•å†…å®¹ã€‚ å½“ä½ æäº¤æ¯ä¸ªPRçš„æ—¶å€™ï¼Œè¦æ€è€ƒçš„ä¸æ˜¯è¿™ä¸ªPRèƒ½ç»™ä½ çš„ä¸‹æ¬¡å‡èŒå¸¦æ¥ä»€ä¹ˆï¼Œè€Œåº”è¯¥æ˜¯è¿™ä¸ªPRå¯ä»¥ä¸ºä½ çš„ç”¨æˆ·å’Œç¤¾åŒºåšäº›ä»€ä¹ˆã€‚è¦ä¸æƒœä¸€åˆ‡ä»£ä»·åœ°é¿å…â€œç‹ æ˜¾çœ¼çš„è´¡çŒ®â€ã€‚å¦‚æœä¸æ˜¯å¾ˆæ˜æ˜¾çš„èƒ½å¸®åŠ©äº§å“çš„ç›®çš„ï¼Œå°±è¯·ä¸è¦æ·»åŠ ä»»ä½•åŠŸèƒ½ã€‚ ä»£ç ä¹Ÿæ˜¯æœ‰å“ä½çš„ã€‚å“å‘³æ˜¯ç”±å¯¹ç®€å•çš„æ¸´æœ›è€Œäº§ç”Ÿç¬¦åˆçº¦æŸ-æ»¡è¶³è§„èŒƒçš„è¿‡ç¨‹ï¼Œè¦æ—¶åˆ»ä¿æŒç€å¯¹ç®€å•çš„æ‰§å¿µã€‚ æ•¢äºæ‹’ç» - åªæ˜¯å› ä¸ºæœ‰äººè¦æ±‚æä¾›åŠŸèƒ½å¹¶ä¸æ„å‘³ç€ä½ åº”è¯¥è¿™ä¹ˆåšã€‚æ¯é¡¹åŠŸèƒ½çš„æˆæœ¬éƒ½è¶…å‡ºäº†æœ€åˆçš„å®æ–½èŒƒå›´ï¼šå› ä¸ºæœ‰ç»´æŠ¤æˆæœ¬ã€æ–‡æ¡£æˆæœ¬å’Œç”¨æˆ·çš„è®¤çŸ¥æˆæœ¬ã€‚å¦‚æœä½ æ€»æ˜¯é—®ï¼šæˆ‘ä»¬çœŸçš„åº”è¯¥è¿™æ ·åšå—ï¼Ÿé€šå¸¸ç­”æ¡ˆéƒ½ä¼šæ˜¯å¦å®šçš„ã€‚ å½“ä½ å¯¹ç”¨æˆ·æå‡ºçš„æ–°çš„åŠŸèƒ½éœ€æ±‚è¯´â€œæ˜¯â€æ—¶ï¼Œè¯·è®°ä½ï¼Œç”¨æˆ·è¦çš„ä¸œè¥¿é€šå¸¸éƒ½ä¸æ˜¯æœ€ä½³çš„é€‰æ‹©ã€‚ç”¨æˆ·å€¼ä¸“æ³¨äºä»–ä»¬è‡ªå·±çš„ç‰¹å®šçš„éœ€æ±‚ï¼Œä½ å¿…é¡»ä»¥é¡¹ç›®çš„æ•´ä½“æ€§å’Œè‡ªæœ‰çš„åŸåˆ™æ¥åº”å¯¹è¿™ä¸€ç‚¹ã€‚é€šå¸¸æ­£ç¡®çš„ç­”æ¡ˆä¼šæ˜¯æ‰©å±•ç°æœ‰çš„åŠŸèƒ½ã€‚ åœ¨æŒç»­é›†æˆå’Œä»¥å…¨é¢è¦†ç›–å•å…ƒæµ‹è¯•ä¸ºç›®æ ‡è¿™ä¸¤ä»¶äº‹ä¸Šå¤šæŠ•å…¥ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ä½ èƒ½å¤„åœ¨ä¸€ä¸ªè‡ªä¿¡çš„ç¼–ç ç¯å¢ƒä¸­ï¼›å¦‚æœä¸æ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆé¦–è¦ä»»åŠ¡å°±åº”è¯¥æ˜¯å…³æ³¨å»ºç«‹æ­£ç¡®çš„åŸºç¡€è®¾æ–½ã€‚ æ²¡æœ‰æå‰è®¡åˆ’å¥½ä¸€äº›æ²¡æœ‰å…³ç³»ã€‚ä¸æ–­åœ°å°è¯•ç„¶åçœ‹çœ‹ç»“æœå¦‚ä½•ã€‚ææ—©çº é”™ï¼Œç¡®ä¿ä½ åˆ›å»ºäº†ä¸€ä¸ªæ²¡æœ‰ä¸å¯èƒ½çš„ç¯å¢ƒã€‚ å¥½çš„è½¯ä»¶ä¼šè®©äº‹æƒ…å˜å¾—ç®€å•ã€‚ä»…ä»…å› ä¸ºä¸€å¼€å§‹é—®é¢˜çœ‹èµ·æ¥å¾ˆå›°éš¾å¹¶ä¸æ„å‘³ç€è§£å†³æ–¹æ¡ˆå¿…é¡»å¤æ‚æˆ–éš¾ä»¥ä½¿ç”¨ã€‚å¾ˆå¤šæ—¶å€™ï¼Œåœ¨ä¸€ä¸ªä¼šæœ‰æ›´å®¹æ˜“çš„æ–¹æ¡ˆä½†å¯èƒ½ä¸æ˜¯é‚£ä¹ˆæ˜æ˜¾çš„æƒ…å†µä¸‹ï¼Œå·¥ç¨‹å¸ˆå¾€å¾€ä¼šæ¡ä»¶åå°„å¼åœ°é€‰æ‹©å¼•å…¥å¤æ‚åº¦å¾ˆé«˜çš„è§£å†³æ–¹æ¡ˆï¼ˆè®©æˆ‘ä»¬ä½¿ç”¨MLï¼è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼è®©æˆ‘ä»¬æ·»åŠ åŒºå—é“¾ï¼ï¼‰ã€‚åœ¨ä½ å†™ä¸‹ä»»ä½•ä»£ç å‰ï¼Œç¡®ä¿ä½ çš„è§£å†³æ–¹æ¡ˆä¸èƒ½å†ç®€å•äº†ã€‚ä»»ä½•äº‹æƒ…éµå¾ªç¬¬ä¸€æ€§åŸç†ã€‚ é¿å…å¾ˆéšæ™¦çš„è§„åˆ™ã€‚å½“ä½ å‘ç°è‡ªå·±å¼€å‘äº†ä¸€ç§è¾ƒä¸ºéšæ™¦çš„è§„åˆ™æ—¶ï¼Œåº”ä¿æŒè§„åˆ™æ˜ç¡®å¹¶ä¸ä»–äººå…±äº«æˆ–è‡ªåŠ¨åŒ–ã€‚æ¯å½“ä½ å‘ç°è‡ªå·±æƒ³å‡ºä¸€ä¸ªåå¤çš„ï¼Œå‡†ç®—æ³•çš„å·¥ä½œæµç¨‹æ—¶ï¼Œåº”è¯¥è®¾æ³•å°†å…¶å½¢å¼åŒ–ä¸ºä¸€ä¸ªæ–‡æ¡£åŒ–çš„æµç¨‹ï¼Œä»¥ä¾¿å…¶ä»–å›¢é˜Ÿæˆå‘˜ä»è¯¥ä½“éªŒä¸­å—ç›Šã€‚æ­¤å¤–ï¼Œä½ åº”è¯¥è®¾æ³•åœ¨è‡ªåŠ¨åŒ–è¿™ç§ä»»ä½•å¯è¢«è‡ªåŠ¨åŒ–çš„å·¥ä½œæµç¨‹éƒ¨ä»½ï¼ˆä¾‹å¦‚ï¼Œæ­£ç¡®æ€§æ£€æŸ¥ï¼‰ã€‚ åœ¨è®¾è®¡è¿‡ç¨‹ä¸­åº”è€ƒè™‘ä½ æ‰€åšé€‰æ‹©çš„å…¨å±€å½±å“ï¼Œè€Œä¸ä»…ä»…æ˜¯è‡ªå·±æƒ³è¦å…³æ³¨çš„éƒ¨åˆ† - ä¾‹å¦‚æ”¶å…¥æˆ–å¢é•¿ã€‚é™¤äº†ä½ å½“å‰æ­£åœ¨ç›‘æ§çš„æŒ‡æ ‡ä¹‹å¤–ï¼Œä½ çš„è½¯ä»¶å¯¹å…¨çƒç”¨æˆ·çš„æ€»ä½“å½±å“æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å¦å­˜åœ¨è¶…å‡ºä»·å€¼ä¸»å¼ çš„ä¸è‰¯å‰¯ä½œç”¨ï¼Ÿåœ¨ä¿ç•™è½¯ä»¶å®ç”¨æ€§çš„åŒæ—¶ï¼Œä½ å¯ä»¥åšäº›ä»€ä¹ˆæ¥è§£å†³å®ƒä»¬ï¼Ÿ é“å¾·è®¾è®¡ï¼Œå°†ä½ çš„ä»·å€¼è§‚èå…¥åœ¨ä½ çš„åˆ›ä½œä¸­ã€‚ APIè®¾è®¡ ä½ çš„APIæ˜¯æœ‰ç”¨æˆ·çš„ï¼Œæ‰€ä»¥å®ƒåº”è¯¥ä¹Ÿè¦æœ‰ç”¨æˆ·ä½“éªŒã€‚åœ¨ä½ åšå‡ºçš„æ¯ä¸€ä¸ªå†³å®šä¸­ï¼Œéƒ½è¦ç‰¢è®°ä½ çš„ç”¨æˆ·ã€‚å¯¹ç”¨æˆ·å……æ»¡åŒç†å¿ƒï¼Œæ— è®ºä»–ä»¬æ˜¯åˆå­¦è€…è¿˜æ˜¯ç»éªŒè€é“çš„è€å¸æœºã€‚ å§‹ç»ˆå¯»æ±‚åœ¨ä½¿ç”¨APIâ€‹â€‹çš„è¿‡ç¨‹ä¸­å°½é‡å‡å°‘å¯¹ç”¨æˆ·çš„è®¤çŸ¥è´Ÿæ‹…ã€‚è‡ªåŠ¨åŒ–å¯è‡ªåŠ¨åŒ–çš„å†…å®¹ï¼Œæœ€å¤§é™åº¦åœ°å‡å°‘ç”¨æˆ·æ‰€éœ€çš„æ“ä½œå’Œé€‰æ‹©ï¼Œä¸è¦æš´éœ²ä¸é‡è¦çš„é€‰é¡¹ï¼Œè®¾è®¡ç®€å•ä¸€è‡´çš„å·¥ä½œæµç¨‹ï¼Œä»¥åæ˜ ç®€å•ä¸€è‡´çš„å¿ƒç†æ¨¡å‹ã€‚ ç®€å•çš„äº‹æƒ…åº”è¯¥æ˜¯ç®€å•çš„ï¼Œå¤æ‚çš„äº‹æƒ…åº”è¯¥æ˜¯å¯èƒ½çš„ï¼ˆSimple things should be simple, complex things should be possible. â€”-Alan Kayï¼‰ã€‚ä¸è¦ä¸ºäº†å°ä¼—ç”¨ä¾‹å¢åŠ å¸¸è§ç”¨ä¾‹çš„è®¤çŸ¥è´Ÿè·ï¼Œå³ä½¿å½±å“å¾ˆå°ã€‚ å¦‚æœå·¥ä½œæµçš„è®¤çŸ¥è´Ÿè·è¶³å¤Ÿä½ï¼Œé‚£ä¹ˆç”¨æˆ·åº”è¯¥å¯ä»¥åœ¨å®Œæˆä¸€æ¬¡æˆ–ä¸¤æ¬¡ä¹‹åå°±å¯ä»¥è®°ä½å®ƒï¼ˆæ— éœ€æŸ¥é˜…æ•™ç¨‹æˆ–æ–‡æ¡£ï¼‰ã€‚ å¯»æ±‚æ‹¥æœ‰ä¸é¢†åŸŸä¸“å®¶å’Œä»ä¸šè€…çš„å¿ƒç†æ¨¡å‹ç›¸åŒ¹é…çš„APIã€‚æ‹¥æœ‰é¢†åŸŸç»éªŒä½†å¯¹ä½ çš„APIæ²¡æœ‰ç»éªŒçš„äººåº”è¯¥èƒ½å¤Ÿçœ‹æœ€å°‘çš„æ–‡æ¡£å°±èƒ½ç›´è§‚åœ°æ˜ç™½ä½ çš„APIï¼Œå¾ˆå¤šæ—¶å€™åªéœ€è¦é€šè¿‡æŸ¥çœ‹å‡ ä¸ªä»£ç ç¤ºä¾‹å¹¶æŸ¥çœ‹å“ªäº›å¯¹è±¡å¯ç”¨ä»¥åŠå®ƒä»¬çš„ç­¾åæ˜¯ä»€ä¹ˆã€‚ åœ¨æ²¡æœ‰ä»»ä½•å…³äºåº•å±‚å®ç°çš„ä¸Šä¸‹æ–‡æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å«ä¹‰åº”è¯¥æ˜¯å¯ç†è§£çš„ã€‚å¿…é¡»ç”±ç”¨æˆ·æŒ‡å®šçš„å‚æ•°åº”è¯¥ä¸ç”¨æˆ·å¯¹é—®é¢˜çš„å¿ƒç†æ¨¡å‹æœ‰å…³ï¼Œè€Œä¸æ˜¯è·Ÿä»£ç çš„å®ç°ç»†èŠ‚æœ‰å…³ã€‚APIä»£è¡¨çš„æ˜¯å®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œè€Œä¸æ˜¯å®ƒèƒŒåæ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚ æœ€å¼ºå¤§çš„å¿ƒç†æ¨¡å‹æ˜¯æ¨¡å—åŒ–å’Œåˆ†å±‚çš„ï¼šé«˜åº¦ç®€å•ï¼Œä½†æ˜¯å½“ä½ éœ€è¦äº†è§£ç»†èŠ‚æ—¶ï¼Œåˆå¾ˆç²¾ç»†ã€‚åŒæ ·ï¼Œä¸€ä¸ªå¥½çš„APIæ˜¯æ¨¡å—åŒ–å’Œåˆ†å±‚çš„ï¼šæ˜“äºä½¿ç”¨ï¼Œä½†åˆå…·æœ‰è¡¨ç°åŠ›ã€‚å¯¹è±¡å°‘ï¼Œä½†ç­¾åå¤æ‚ï¼Œä¸å¯¹è±¡å¤šä½†ç­¾åç®€å•ä¹‹é—´å­˜åœ¨ç€ä¸€ä¸ªå¹³è¡¡ã€‚ä¸€ä¸ªå¥½çš„APIåº”è¯¥æœ‰åˆç†æ•°é‡çš„å¯¹è±¡ï¼Œä¸”å…·æœ‰ç›¸å½“ç®€å•çš„ç­¾åã€‚ ä½ çš„APIä¸å¯é¿å…åœ°åæ˜ äº†ä½ é€‰æ‹©çš„å®ç°ï¼Œç‰¹åˆ«æ˜¯ä½ é€‰æ‹©çš„æ•°æ®ç»“æ„ã€‚è¦å®ç°ç›´è§‚çš„APIï¼Œä½ å¿…é¡»ä¸€å¼€å§‹å°±é€‰æ‹©è‡ªç„¶é€‚åˆçš„æ•°æ®ç»“æ„ - ä¸è¯¥é¢†åŸŸä¸“å®¶çš„å¿ƒæ™ºæ¨¡å‹ç›¸åŒ¹é…ã€‚ æ•…æ„è®¾è®¡ç«¯åˆ°ç«¯å·¥ä½œæµç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ç»„åŸå­åŠŸèƒ½ã€‚å¤§å¤šæ•°å¼€å‘äººå‘˜ä¼šè¯¢é—®ï¼šâ€åº”è¯¥æä¾›å“ªäº›åŠŸèƒ½æ¥å¤„ç†APIè®¾è®¡ï¼Ÿè®©æˆ‘ä»¬ä¸ºä»–ä»¬é…ç½®é€‰é¡¹å§ã€‚â€œç›¸ååœ°ï¼Œåº”è¯¥é—®ï¼šè¯¥å·¥å…·çš„ç”¨ä¾‹æ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºæ¯ä¸ªç”¨ä¾‹ï¼Œç”¨æˆ·æ“ä½œçš„æœ€ä½³é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯å¯ä»¥æ”¯æŒè¿™ä¸ªå·¥ä½œæµç¨‹æœ€ç®€å•çš„APIï¼Ÿ APIä¸­çš„åŸå­é€‰é¡¹åº”è¯¥èƒ½å¤Ÿæ»¡è¶³é«˜çº§å·¥ä½œæµç¨‹ä¸­å‡ºç°çš„æ˜ç¡®éœ€æ±‚ - ä¸åº”è¯¥â€œå› ä¸ºæœ‰äººå¯èƒ½éœ€è¦å®ƒâ€å°±æ·»åŠ å®ƒä»¬ã€‚ é”™è¯¯æ¶ˆæ¯ä»¥åŠé€šå¸¸åœ¨ä¸APIäº¤äº’è¿‡ç¨‹ä¸­å‘ç”¨æˆ·æä¾›çš„ä»»ä½•åé¦ˆéƒ½æ˜¯APIçš„ä¸€éƒ¨åˆ†ã€‚äº¤äº’æ€§å’Œåé¦ˆæ˜¯ç”¨æˆ·ä½“éªŒä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚è¦ä¸ºä½ çš„APIè®¾è®¡é”™è¯¯æ¶ˆæ¯ã€‚ å› ä¸ºä»£ç æ˜¯ä¸€ç§äº¤æµï¼Œæ‰€ä»¥å‘½åå¾ˆé‡è¦ - æ— è®ºæ˜¯é¡¹ç›®è¿˜æ˜¯å˜é‡çš„å‘½åã€‚åç§°åæ˜ äº†ä½ å¯¹é—®é¢˜çš„çœ‹æ³•ã€‚é¿å…ä½¿ç”¨è¿‡äºé€šç”¨çš„åç§°ï¼ˆxï¼Œå˜é‡ï¼Œå‚æ•°ï¼‰ï¼Œé¿å… OverlyLongAndSpecificNamingPatternsï¼Œé¿å…å¯èƒ½äº§ç”Ÿä¸å¿…è¦çš„æœ¯è¯­ï¼ˆä¸»ï¼Œä»ï¼‰ï¼Œå¹¶ç¡®ä¿åœ¨å‘½åé€‰æ‹©ä¸­ä¿æŒä¸€è‡´ã€‚å‘½åä¸€è‡´æ€§æ„å‘³ç€å†…éƒ¨å‘½åä¸€è‡´æ€§ï¼ˆä¸è¦ä¸€äº›åœ°æ–¹ç”¨â€dimâ€œä»£è¡¨åæ ‡è½´ï¼Œåœ¨å¦ä¸€äº›åœ°æ–¹ç”¨â€axisâ€œï¼‰ä»¥åŠä¸é—®é¢˜åŸŸçš„æ—¢å®šçº¦å®šçš„ä¸€è‡´æ€§ã€‚åœ¨å‘½åä¹‹å‰ï¼Œåº”å°½é‡ä½¿ç”¨è¯¥é¢†åŸŸä¸“å®¶ï¼ˆæˆ–å…¶ä»–APIï¼‰å·²åœ¨ä½¿ç”¨çš„å‘½åã€‚ æ–‡æ¡£æ˜¯APIç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒï¼Œå®ƒä¸æ˜¯é™„å±å“ã€‚åœ¨é«˜è´¨é‡çš„æ–‡æ¡£ä¸Šå¤šèŠ±æ—¶é—´ï¼Œä½ ä¼šå¾—åˆ°æ¯”åœ¨æ›´å¤šåŠŸèƒ½ä¸Šå¤šèŠ±æ—¶é—´æ›´é«˜çš„å›æŠ¥ã€‚ å±•ç¤ºï¼Œè€Œä¸æ˜¯è§£é‡Šï¼šä½ çš„æ–‡æ¡£ä¸åº”è¯¥è®¨è®ºè½¯ä»¶çš„å·¥ä½œåŸç†ï¼Œå®ƒåº”è¯¥è¯´æ˜å¦‚ä½•ä½¿ç”¨å®ƒã€‚å±•ç¤ºç«¯åˆ°ç«¯å·¥ä½œæµçš„ä»£ç ç¤ºä¾‹ã€æ˜¾ç¤ºAPIçš„æ¯ä¸ªå¸¸è§ç”¨ä¾‹å’Œå…³é”®åŠŸèƒ½çš„ä»£ç ç¤ºä¾‹ã€‚ ç”Ÿäº§åŠ›å½’ç»“ä¸ºå¿«é€Ÿå†³ç­–å’Œæ‰§è¡ŒåŠ›ã€‚ è½¯ä»¶ç”Ÿæ¶¯ èŒä¸šå‘å±•å¹¶ä¸æ˜¯ä½ ç®¡ç†äººæ•°çš„å¤šå°‘ï¼Œè€Œæ˜¯ä½ æ‰€äº§ç”Ÿçš„å½±å“ï¼Œè¿™ä¸ªä¸–ç•Œæœ‰ä½ æ²¡ä½ ä¼šæœ‰å¤šå¤§çš„å·®åˆ«? è½¯ä»¶å¼€å‘æ˜¯ä¸€é¡¹å›¢é˜Ÿåˆä½œï¼›å®ƒä¸äººé™…å…³ç³»å’ŒæŠ€æœ¯èƒ½åŠ›æœ‰å…³ã€‚åšä¸ªå¥½ä¼™ä¼´ï¼Œå½“ä½ ä¸æ–­å‰è¡Œæ—¶ï¼Œä¸è¦å¿˜äº†ä¸äººä¿æŒè”ç³»ã€‚ æŠ€æœ¯æ°¸è¿œä¸ä¼šæ˜¯ä¸­ç«‹çš„ã€‚å¦‚æœä½ çš„å·¥ä½œå¯¹ä¸–ç•Œæœ‰ä»»ä½•å½±å“ï¼Œé‚£ä¹ˆè¿™ç§å½±å“å°±æœ‰é“å¾·æ–¹å‘ã€‚æˆ‘ä»¬åœ¨è½¯ä»¶äº§å“ä¸­çœ‹ä¼¼æ— å®³çš„æŠ€æœ¯é€‰æ‹©éƒ½ä¼šè¢«å……æ»¡ä½¿ç”¨åŠ¨æœºï¼Œè°å°†å—ç›Šï¼Œè°å°†å—åˆ°å½±å“ã€‚æŠ€æœ¯é€‰æ‹©ä¹Ÿæ˜¯é“å¾·é€‰æ‹©ã€‚å› æ­¤ï¼Œå§‹ç»ˆè°¨æ…è€Œæ˜ç¡®åœ°è¡¨è¾¾ä½ æƒ³è¦æ”¯æŒçš„ä»·å€¼è§‚ã€‚é“å¾·è®¾è®¡ï¼Œå°†æ‚¨çš„ä»·å€¼è§‚èå…¥æ‚¨çš„åˆ›ä½œä¸­ã€‚æ°¸è¿œä¸è¦æƒ³ï¼Œæˆ‘åªæ˜¯åœ¨å»ºç«‹è¿™ç§èƒ½åŠ›ï¼Œè¿™æœ¬èº«æ˜¯ä¸­ç«‹çš„ã€‚ä½ æ„å»ºå®ƒçš„æ–¹å¼æ— æ³•å†³å®šå®ƒè¢«ä½¿ç”¨çš„æ–¹å¼ã€‚ è‡ªæˆ‘å¼•å¯¼ï¼Œä½ çš„å·¥ä½œå’Œç¯å¢ƒçš„åŠ›é‡ï¼Œæ˜¯ç”Ÿæ´»æ»¡æ„åº¦çš„å…³é”®ã€‚ç¡®ä¿ä½ ç»™äºˆå‘¨å›´çš„äººå……åˆ†çš„è‡ªæˆ‘å¼•å¯¼ï¼Œå¹¶ç¡®ä¿ä½ çš„èŒä¸šé€‰æ‹©èƒ½å¤Ÿä¸ºä½ è‡ªå·±å¸¦æ¥æ›´å¤šçš„åŠ›é‡ã€‚ å»åˆ›é€ è¿™ä¸ªä¸–ç•Œéœ€è¦çš„ä¸œè¥¿ï¼Œè€Œä¸ä»…ä»…æ˜¯ä½ å¸Œæœ›æ‹¥æœ‰çš„ä¸œè¥¿ã€‚æŠ€æœ¯äººå‘˜å¸¸å¸¸ä¼šè¾¹è¿‡ç€ç¨€è–„çš„ç”Ÿæ´»ï¼Œè¾¹ä¸“æ³¨äºæ»¡è¶³è‡ªèº«ç‰¹å®šéœ€æ±‚çš„äº§å“ã€‚å¯»æ‰¾æœºä¼šæ‹“å®½ä½ çš„ç”Ÿæ´»ä½“éªŒï¼Œè®©è‡ªå·±èƒ½æ›´å¥½åœ°å‘ç°è¿™ä¸ªä¸–ç•Œéœ€è¦ä»€ä¹ˆã€‚ åœ¨åšå‡ºä¼šæœ‰é•¿æœŸå½±å“çš„ä»»ä½•é€‰æ‹©æ—¶ï¼Œè¯·å°†ä½ çš„ä»·å€¼è§‚ç½®äºçŸ­æœŸçš„è‡ªèº«åˆ©ç›Šå’Œè¿‡åº¦çš„æƒ…ç»ªä¹‹ä¸Š - ä¾‹å¦‚è´ªå©ªæˆ–ææƒ§ã€‚è®¤æ¸…ä½ çš„ä»·å€¼è§‚ï¼Œå¹¶è®©å®ƒä»¬å¼•å¯¼ä½ ã€‚ å½“æˆ‘ä»¬å‘ç°è‡ªå·±é™·å…¥å†²çªæ—¶ï¼Œå…ˆæš‚åœä¸‹æ¥å¹¶æ‰¿è®¤æˆ‘ä»¬çš„å…±åŒä»·å€¼è§‚å’Œå…±åŒç›®æ ‡æ˜¯ä¸ªä¸é”™çš„ä¸»æ„ï¼Œæé†’å½¼æ­¤ï¼Œæˆ‘ä»¬æ˜¯åœ¨åŒä¸€æ¡èˆ¹ä¸Šçš„ã€‚ ç”Ÿäº§åŠ›å½’ç»“ä¸ºé«˜é€Ÿå†³ç­–å’Œæ‰§è¡ŒåŠ›ã€‚è¿™éœ€è¦aï¼‰è‰¯å¥½çš„ç›´è§‰ï¼Œè¿™æ¥è‡ªä»¥å¾€çš„ç»éªŒï¼Œå®ƒå¯ä»¥å¸®ä½ åœ¨åªç»™å‡ºéƒ¨åˆ†ä¿¡æ¯çš„æƒ…å†µä¸‹å°±åšå‡ºæ™®éæ­£ç¡®çš„å†³å®š; bï¼‰æ•é”åœ°æ„è¯†åˆ°ä½•æ—¶åº”è¯¥æ›´è°¨æ…çš„è¡ŒåŠ¨å¹¶ç­‰å¾…æ›´å¤šä¿¡æ¯ï¼Œå› ä¸ºé”™è¯¯å†³ç­–ä¼šæ¯”å»¶æœŸä»˜å‡ºæ›´é«˜çš„ä»£ä»·ã€‚æœ€å¿«çš„é€Ÿåº¦/æœ€å¥½çš„è´¨é‡ä¹‹é—´çš„å†³ç­–å¾€å¾€ä¼šåœ¨ä¸åŒç¯å¢ƒè€Œæœ‰ä¸åŒçš„æƒè¡¡ã€‚ æ›´å¿«åœ°åšå‡ºå†³ç­–æ„å‘³ç€ä½ åœ¨èŒä¸šç”Ÿæ¶¯ä¸­è¦åšå‡ºæ›´å¤šå†³ç­–ï¼Œè¿™å°†ä½¿ä½ å¯¹æ­£ç¡®çš„é€‰é¡¹æœ‰æ›´å¼ºçš„ç›´è§‰ã€‚ç»éªŒæ˜¯æé«˜ç”Ÿäº§åŠ›çš„å…³é”®ï¼Œæ›´é«˜çš„ç”Ÿäº§åŠ›å°†ä¸ºä½ æä¾›æ›´å¤šçš„ç»éªŒï¼šè‰¯æ€§å¾ªç¯ã€‚ åœ¨ä½ æ„è¯†åˆ°ç¼ºä¹ç›´è§‰çš„æƒ…å†µä¸‹ï¼Œè¯·éµå®ˆæŠ½è±¡åŸåˆ™ã€‚åœ¨æ•´ä¸ªèŒä¸šç”Ÿæ¶¯ä¸­å»ºç«‹å°è¯•è¿‡ä¸”æ­£ç¡®çš„åŸåˆ™åˆ—è¡¨ã€‚åŸåˆ™æ˜¯å½¢å¼åŒ–çš„ç›´è§‰ï¼Œç›¸æ¯”äºåŸå§‹ç›´è§‰ï¼ˆéœ€è¦å¯¹ç±»ä¼¼æƒ…å†µçš„æœ‰ç›´æ¥ä¸”ä¸°å¯Œçš„ç»éªŒï¼‰ï¼Œå®ƒèƒ½é€‚ç”¨äºæ›´å¹¿æ³›çš„åœºæ™¯ã€‚","categories":[],"tags":[{"name":"å¿ƒå¾—","slug":"å¿ƒå¾—","permalink":"https://shixiong.name/tags/å¿ƒå¾—/"},{"name":"è½¯ä»¶å·¥ç¨‹","slug":"è½¯ä»¶å·¥ç¨‹","permalink":"https://shixiong.name/tags/è½¯ä»¶å·¥ç¨‹/"}]},{"title":"ARTSæŒ‘æˆ˜-ç¬¬äºŒå‘¨","slug":"arts-second-week","date":"2019-03-29T08:16:23.000Z","updated":"2019-07-30T02:17:17.743Z","comments":true,"path":"2019/03/29/arts-second-week/","link":"","permalink":"https://shixiong.name/2019/03/29/arts-second-week/","excerpt":"","text":"ä»€ä¹ˆæ˜¯ARTSï¼Ÿ 1.Algorithmï¼šæ¯å‘¨è‡³å°‘åšä¸€ä¸ª leetcode çš„ç®—æ³•é¢˜2.Reviewï¼šé˜…è¯»å¹¶ç‚¹è¯„è‡³å°‘ä¸€ç¯‡è‹±æ–‡æŠ€æœ¯æ–‡ç« 3.Tipï¼šå­¦ä¹ è‡³å°‘ä¸€ä¸ªæŠ€æœ¯æŠ€å·§4.Shareï¼šåˆ†äº«ä¸€ç¯‡æœ‰è§‚ç‚¹å’Œæ€è€ƒçš„æŠ€æœ¯æ–‡ç«  Algorithm ä¸€å¼€å§‹ä»¥ä¸ºè¿™é“é¢˜ç›®æŒºéš¾çš„ï¼Œåæ¥å…¶å®æ…¢æ…¢çš„ç ”ç©¶ä¸‹å»å‘ç°è¿˜å¥½ï¼Œå°±æ˜¯2æ•°ç›¸åŠ ï¼Œéœ€è¦è€ƒè™‘è¿›ä½çš„é—®é¢˜ã€‚ä»£ç æäº¤åçœ‹äº†ä¸€ä¸‹Solutionï¼Œå‘ç°æ€è·¯å¤§è‡´ä¹Ÿå·®ä¸å¤šã€‚ä¸€å¼€å§‹è¿˜æ€€ç–‘è‡ªå·±ï¼Œæ²¡æƒ³åˆ°èƒ½æŠ“åˆ°è€é¼ çš„éƒ½æ˜¯å¥½çŒ«ã€‚ Q: You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list. You may assume the two numbers do not contain any leading zero, except the number 0 itself. Example: 123Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)Output: 7 -&gt; 0 -&gt; 8Explanation: 342 + 465 = 807. A: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192/** * Definition for singly-linked list. * public class ListNode &#123; * public var val: Int * public var next: ListNode? * public init(_ val: Int) &#123; * self.val = val * self.next = nil * &#125; * &#125; */class Solution &#123; /// ä¸¤ä¸ªæ•°å­—ç›¸åŠ ï¼Œå¹¶è¿”å›åä½å’Œä¸ªä½ func addNum(_ num1: Int, _ num2: Int) -&gt; (high: Int, low: Int) &#123; var resultH = 0 var resultL = 0 let sum = num1 + num2 if sum &gt;= 10 &#123; resultH = 1 resultL = sum - 10 &#125; else &#123; resultL = sum &#125; return (resultH, resultL) &#125; func addTwoNumbers(_ l1: ListNode?, _ l2: ListNode?) -&gt; ListNode? &#123; if let l1 = l1, let l2 = l2 &#123; var node1: ListNode? = l1 var node2: ListNode? = l2 var cursor: ListNode? var waitToAdd: Int = 0 var result: ListNode? = ListNode(-1) while true &#123; // å½“ä¸¤ä¸ªnodeèŠ‚ç‚¹å‡ä¸ºç©ºäº†åœæ­¢å¾ªç¯ if node1 == nil, node2 == nil &#123; break &#125; // æ„å»ºç©ºèŠ‚ç‚¹ if node1 == nil &#123; node1 = ListNode(0) &#125; if node2 == nil &#123; node2 = ListNode(0) &#125; let r = addNum(node1!.val, node2!.val) let t = addNum(r.low, waitToAdd) if t.high == 1 &#123; waitToAdd = t.high &#125; else &#123; waitToAdd = r.high &#125; if result?.val == -1 &#123; result?.val = t.low cursor = result &#125; else &#123; let node = ListNode(t.low) cursor?.next = node cursor = node &#125; node1 = node1!.next node2 = node2!.next &#125; if waitToAdd != 0 &#123; cursor?.next = ListNode(1) &#125; return result &#125; if l1 == nil &#123; return l2 &#125; if l2 == nil &#123; return l1 &#125; return nil &#125;&#125; Reviewè¿™ä¸€ç¯‡ Pro Pattern-Matching in Swift æŠŠ Swift ä¸­çš„ Pattern[ËˆpatÉ™rn]-Matching è®²å¾—æ¯”è¾ƒè¯¦ç»†äº†ã€‚ Pattern-Matching æ˜¯ Swift ä¸­ä¸€ä¸ªèƒ½æŠŠä»£ç å†™å¾—æ•´æ´åˆå®‰å…¨çš„æ–¹å¼ï¼Œå¿…é¡»æŒæ¡ã€‚ TipSwift ä¸­éƒ¨åˆ†é«˜é˜¶å‡½æ•°å¯¹æ¯”ï¼ˆä»¥æ“ä½œæ•°ç»„ä¸ºä¾‹ï¼‰ï¼šmap vs flatMap vs compactMap vs filter vs reduce mapå°†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€æ¬¡æ“ä½œ flatMapåŒmapï¼Œä½†æ˜¯ä¸ä¼šè¿”å›nilï¼Œä¸”ä¼šå¯¹æ•°ç»„ä¸­çš„ optional è¿›è¡Œè§£åŒ… compactMapå¦‚æœ flatMap çš„å›è°ƒä¸­å¯èƒ½è¿”å› optionalï¼Œåˆ™éœ€è¦ä½¿ç”¨ compactMap â€˜flatMapâ€™ is deprecated: Please use compactMap(_:) for the case where closure returns an optional value filteré¡¾åæ€ä¹‰ï¼Œå¯ä»¥æŒ‰ç…§ closure ä¸­çš„æ ‡å‡†ï¼ŒæŠŠæ•°ç»„ä¸­çš„ä¸€äº›å…ƒç´ è¿‡æ»¤æ‰ reducereduce å°±æ˜¯å¯ä»¥æŠŠæ•°ç»„æ‹å¹³ï¼Œæ¯”å¦‚ä¸€ä¸ª [String]ï¼Œç”¨ reduce å¯ä»¥è®©å®ƒè¿”å›æˆ String ShareNotes to Myself on Software Engineeringï¼Œè¿™æ˜¯ Keras çš„å¼€å‘è€… FranÃ§ois Chollet æ•´ç†çš„ç¬”è®°ï¼Œé‡Œé¢æœ‰å¾ˆå¤šæ€è€ƒå€¼å¾—å­¦ä¹ ã€‚ç”±äºå†™å¾—å¤ªå¥½äº†ï¼Œæˆ‘æŠŠå®ƒç¿»è¯‘äº†ä¸€ä¸‹ã€‚","categories":[],"tags":[{"name":"ARTS","slug":"ARTS","permalink":"https://shixiong.name/tags/ARTS/"}]},{"title":"ARTSæŒ‘æˆ˜-ç¬¬ä¸€å‘¨","slug":"arts-first-week","date":"2019-03-25T08:25:19.000Z","updated":"2019-07-30T02:17:17.743Z","comments":true,"path":"2019/03/25/arts-first-week/","link":"","permalink":"https://shixiong.name/2019/03/25/arts-first-week/","excerpt":"","text":"ä»€ä¹ˆæ˜¯ARTSï¼Ÿ 1.Algorithmï¼šæ¯å‘¨è‡³å°‘åšä¸€ä¸ª leetcode çš„ç®—æ³•é¢˜2.Reviewï¼šé˜…è¯»å¹¶ç‚¹è¯„è‡³å°‘ä¸€ç¯‡è‹±æ–‡æŠ€æœ¯æ–‡ç« 3.Tipï¼šå­¦ä¹ è‡³å°‘ä¸€ä¸ªæŠ€æœ¯æŠ€å·§4.Shareï¼šåˆ†äº«ä¸€ç¯‡æœ‰è§‚ç‚¹å’Œæ€è€ƒçš„æŠ€æœ¯æ–‡ç«  AlgorithmQ: Given an array of integers, return indices of the two numbers such that they add up to a specific target. You may assume that each input would have exactly one solution, and you may not use the same element twice. Example: 1234Given nums = [2, 7, 11, 15], target = 9,Because nums[0] + nums[1] = 2 + 7 = 9,return [0, 1]. A: 123456789101112131415class Solution &#123; func twoSum(_ nums: [Int], _ target: Int) -&gt; [Int] &#123; for (i, firstItem) in nums.enumerated() &#123; for j in i+1..&lt;nums.count &#123; let secondItem = nums[j] let sum = firstItem + secondItem if sum == target &#123; return [i, j] &#125; &#125; &#125; return [] &#125;&#125; Reviewè¿™å‘¨åˆ†äº«çš„ä¸€ç¯‡æŠ€æœ¯æ–‡ç« æ˜¯Designing a workflow with functions that are capable of failingï¼Œä¸»è¦ä»‹ç»äº†æ›´å¥½çš„é”™è¯¯å¤„ç†å·¥ä½œæµï¼ŒåŒ…æ‹¬Swifté‡Œæ ‡å‡†åº“æ–°åŠ å…¥çš„Resultï¼Œä»¥åŠé€‚é…é‡è¯•ç½‘ç»œè¯·æ±‚ç­‰é€»è¾‘ã€‚ï¼ˆè¿™ä¸¤å¤©æ‰¾ä¸ªæ—¶é—´ç¿»è¯‘ä¸€ä¸‹ï¼‰ Tipè¿™å‘¨åœ¨å†™Swiftçš„æ—¶å€™ï¼Œç”±äºæˆ‘åœ¨ä¸€ä¸ªå˜é‡çš„didSetä¸­åŠ å…¥äº†ä¸€äº›å¤„ç†çš„æ–¹å¼ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œéœ€è¦è§¦å‘å˜é‡çš„didSetæ–¹æ³•ï¼Œäºæ˜¯å°±ä¼šæœ‰è¿™æ ·çš„ä»£ç ï¼šself.model = self.modelï¼Œè¿™ä¸ªæ—¶å€™Xcodeä¼šæŠ¥è­¦ï¼šassign a property to itselfã€‚æ‰€ä»¥åœ¨Swifté‡Œï¼Œæ˜¯ä¸èƒ½æŠŠè‡ªå·±èµ‹ç»™è‡ªå·±çš„ã€‚ æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ 12let temp = self.modelself.model = temp è¿™æ ·å­å°±ç®€å•è§£å†³äº†ã€‚å¯æ˜¯è¿™æ ·å­å…¶ä»–æƒ³ assign a property to itself çš„åœ°æ–¹å°±å¾—ä¹Ÿè¿™ä¹ˆå†™ä¸€éï¼Œæœ‰ç‚¹ç¹çã€‚äºæ˜¯å°±åœ¨æ€è€ƒæœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•å‘¢ï¼Ÿ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰operator 12345prefix operator &lt;&lt;prefix func &lt;&lt; &lt;T: Any&gt;(t: T) -&gt; T &#123; let temp = t return temp&#125; è¿™æ ·åœ¨æƒ³è¦æŠŠè‡ªå·±èµ‹ç»™è‡ªå·±çš„åœ°æ–¹è¿™ä¹ˆå†™å°±è¡Œäº† 1self.model &lt;&lt;= self.model Shareè¿™å‘¨é‡æ¸©äº†ä¸€ä¸‹objcçš„ è¡Œä¸ºé©±åŠ¨å¼€å‘ æœ‰æ—¶å€™æ”¹å˜è‡ªå·±çš„æ€ç»´æ–¹å¼çœŸä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼Œä½†æ˜¯å½“çœŸçš„èƒ½æ¥å—æ–°çš„æ€è€ƒæ–¹å¼å¹¶è½¬å˜çš„è¯ï¼Œä¸€å®šä¼šæœ‰æ›´å¤§çš„çªç ´çš„ã€‚","categories":[],"tags":[{"name":"ARTS","slug":"ARTS","permalink":"https://shixiong.name/tags/ARTS/"}]},{"title":"æ¢ç©¶ä½¿ç”¨Method Swizzlingçš„æ­£ç¡®å§¿åŠ¿","slug":"the-right-way-to-swizzling","date":"2019-03-01T03:07:43.000Z","updated":"2019-07-30T02:17:17.770Z","comments":true,"path":"2019/03/01/the-right-way-to-swizzling/","link":"","permalink":"https://shixiong.name/2019/03/01/the-right-way-to-swizzling/","excerpt":"","text":"èƒŒæ™¯åˆæ¬¡æ¥è§¦åˆ°OC runtimeæœºåˆ¶çš„æ—¶å€™ï¼Œåº”è¯¥éƒ½ä¼šè¢«å…¶é»‘é­”æ³•æ‰€æŠ˜æœã€‚ç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨äº†Method Swizzlingæ¥hookæŸä¸€ä¸ªæ–¹æ³•ï¼Œæ”¹å˜ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ selector çš„å®ç°çš„æ—¶å€™ï¼Œå®ç°AOPç»Ÿè®¡æ‰“ç‚¹ã€APMæ£€æµ‹ã€â€¦ éƒ½æˆä¸ºäº†å¯èƒ½ã€‚ å±å®³ç„¶è€Œï¼Œè¶Šæ˜¯å¼ºå¤§çš„åŠ›é‡ï¼ŒèƒŒåå¾€å¾€ä¼šéšè—ç€æ›´å¤§çš„å±é™©ã€‚ åœ¨Stackoverflowä¸Šï¼Œæœ‰ä¸€ç¯‡æ–‡ç« ï¼šã€ŠWhat are the Dangers of Method Swizzling in Objective C?ã€‹ï¼Œé‡Œé¢å·²ç»æŠŠOCä¸­æ–¹æ³•äº¤æ¢çš„å±é™©æè¿°å¾—éå¸¸æ¸…æ¥šäº†ï¼Œè¿™é‡Œåšä¸ªç®€è¦çš„æ¦‚è¿°ã€‚ 1. Method swizzlingå¹¶éæ˜¯åŸå­æ“ä½œå…¶å®95%çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ Method Swizzling éƒ½æ˜¯å®‰å…¨çš„ã€‚å› ä¸ºæˆ‘ä»¬ä¸€èˆ¬å¸Œæœ›åœ¨æ•´ä¸ªAPPçš„ç”Ÿå‘½å‘¨æœŸé‡Œæ–¹æ³•çš„æ›¿æ¢æ˜¯æœ‰æ•ˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šåœ¨ +(void)load æ–¹æ³•é‡Œæ‰§è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œ è¿™ä¸ªæƒ…å†µä¸‹æ˜¯ä¸ä¼šé‡åˆ°å¹¶å‘é—®é¢˜çš„ã€‚ä½†æ˜¯å¦‚æœä¸å°å¿ƒå°†ä»£ç å†™åˆ°äº† +(void)initialize ä¸­ï¼Œå°±ä¼šæœ‰å¯èƒ½å‡ºç°éå¸¸è¯¡å¼‚çš„æƒ…å†µã€‚ å…¶å®ä¹Ÿåº”è¯¥å°½å¯èƒ½å°‘çš„åœ¨ +(void)initialize ä¸­åšæ“ä½œï¼Œå¦åˆ™ä¼šå½±å“å¯åŠ¨é€Ÿåº¦ã€‚ 2. ä¼šæ›´æ”¹åˆ°å¹¶éæ˜¯æˆ‘ä»¬è‡ªèº«ä»£ç çš„å®ç°å…¶å®è¿™ä¸ªä¹Ÿæ˜¯æƒ³ä¸€ä¸‹å°±èƒ½æ˜ç™½çš„é—®é¢˜ã€‚å¦‚æœä½ åœ¨æ²¡ææ¸…æ¥šçŠ¶å†µçš„æƒ…å†µä¸‹å»è¿›è¡Œæ–¹æ³•æ›¿æ¢ï¼Œå¯èƒ½ä¼šå½±å“åˆ°å…¶ä»–äººçš„ä»£ç ã€‚ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœé‡å†™äº†ä¸€ä¸ªç±»çš„æ–¹æ³•æ—¶ï¼Œå´æ²¡æœ‰è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¯èƒ½å°±ä¼šå‡ºç°é—®é¢˜ã€‚å› æ­¤ä¸ºäº†é¿å…å¯èƒ½å‡ºç°çš„æœªçŸ¥æƒ…å†µï¼Œæˆ‘ä»¬æœ€å¥½è¿˜æ˜¯è¦åœ¨æ›¿æ¢æ–¹æ³•å®ç°é‡Œè°ƒç”¨ä¸€ä¸‹åŸå§‹å®ç°ã€‚ 3. å¯èƒ½ä¼šå­˜åœ¨å‘½åå†²çªåœ¨ Method Swizzling çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨æ–°çš„æ–¹æ³•å‰åŠ ä¸Šä¸€ä¸ªå‰ç¼€ã€‚ å¦‚: 1234- (void)my_setFrame:(NSRect)frame &#123; // do custom work [self my_setFrame:frame]; &#125; ä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸‡ä¸€æœ‰æŸä¸€ä¸ªåœ°æ–¹ï¼Œä¹Ÿå®šä¹‰äº† - (void)my_setFrame:(NSRect)frame è¿™ä¸ªåå­—çš„æ–¹æ³•ï¼Œå°±å¯èƒ½å‡ºç°é—®é¢˜ã€‚ å› æ­¤æœ€å¥½çš„è§£å†³æ–¹å¼è¿˜æ˜¯åœ¨äºä½¿ç”¨å‡½æ•°æŒ‡é’ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆä¸è¿‡è¿™æ ·ä»£ç çœ‹èµ·æ¥å°±ä¸é‚£ä¹ˆOCäº†ï¼‰ã€‚ 12345678910111213141516171819@implementation NSView (MyViewAdditions) static void MySetFrame(id self, SEL _cmd, NSRect frame); static void (*SetFrameIMP)(id self, SEL _cmd, NSRect frame); static void MySetFrame(id self, SEL _cmd, NSRect frame) &#123; // do custom work SetFrameIMP(self, _cmd, frame); &#125; + (void)load &#123; [self swizzle:@selector(setFrame:) with:(IMP)MySetFrame store:(IMP *)&amp;SetFrameIMP]; &#125; @end ä½œè€…ä¹Ÿç»™å‡ºäº†ä¸€ä¸ªæ¯”è¾ƒå®Œç¾çš„swizzleæ–¹æ³•çš„å®šä¹‰ï¼š 1234567891011121314151617181920212223typedef IMP *IMPPointer; BOOL class_swizzleMethodAndStore(Class class, SEL original, IMP replacement, IMPPointer store) &#123; IMP imp = NULL; Method method = class_getInstanceMethod(class, original); if (method) &#123; const char *type = method_getTypeEncoding(method); imp = class_replaceMethod(class, original, replacement, type); if (!imp) &#123; imp = method_getImplementation(method); &#125; &#125; if (imp &amp;&amp; store) &#123; *store = imp; &#125; return (imp != NULL); &#125; @implementation NSObject (FRRuntimeAdditions) + (BOOL)swizzle:(SEL)original with:(IMP)replacement store:(IMPPointer)store &#123; return class_swizzleMethodAndStore(self, original, replacement, store); &#125; @end 4. ä¼šæ”¹å˜æ–¹æ³•çš„å‚æ•°ä½œè€…è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæœ€å¤§çš„é—®é¢˜ã€‚å½“ä½ æ›¿æ¢äº†ä¸€ä¸ªæ–¹æ³•ä¹‹åï¼Œå…¶å®ä½ ä¹Ÿæ›¿æ¢äº†ä¼ å…¥åŸå§‹æ–¹æ³•å®ç°çš„å‚æ•°ã€‚ 1[self my_setFrame:frame]; è¿™ä¸€è¡Œåšçš„äº‹æƒ…æ˜¯ï¼š 1objc_msgSend(self, @selector(my_setFrame:), frame); runtimeä¼šå»å¯»æ‰¾ my_setFrame: çš„å®ç°ï¼Œä¸€æ—¦æ‰¾åˆ°äº†ï¼Œå°±ä¼šæŠŠ my_setFrame å’Œ frame ä¼ å…¥ï¼Œä½†å…¶å®è¿™ä¸ªæ—¶å€™æ‰¾åˆ°çš„æ–¹æ³•åº”è¯¥æ˜¯åŸå§‹çš„ setFrame:ï¼Œäºæ˜¯å½“å®ƒè¢«è°ƒç”¨çš„æ—¶å€™ï¼Œ_cmd è¿™ä¸ªå‚æ•°å¹¶ä¸æ˜¯é¢„æœŸ setFrame:ï¼Œè€Œæ˜¯ my_setFrameï¼Œè¿™æ ·å°±æ¥æ”¶äº†ä¸€ä¸ªæ„æ–™ä¹‹å¤–çš„å‚æ•°ã€‚ æœ€å¥½çš„æ–¹å¼è¿˜æ˜¯ä½¿ç”¨å¦‚ä¸Šçš„å®šä¹‰ã€‚ 5. æ–¹æ³•äº¤æ¢å¸¦æ¥çš„é¡ºåºé—®é¢˜å½“å¯¹å¤šä¸ªç±»è¿›è¡Œæ–¹æ³•äº¤æ¢çš„æ—¶å€™ï¼Œè¦æ³¨æ„é¡ºåºï¼Œç‰¹åˆ«æ˜¯æœ‰çˆ¶å­ç±»å…³ç³»çš„æ—¶å€™ã€‚æ¯”å¦‚ï¼š 123[NSButton swizzle:@selector(setFrame:) with:@selector(my_buttonSetFrame:)];[NSControl swizzle:@selector(setFrame:) with:@selector(my_controlSetFrame:)];[NSView swizzle:@selector(setFrame:) with:@selector(my_viewSetFrame:)]; ä¸Šè¿°çš„å®ç°ï¼Œå…¶å®æœ€ç»ˆå½“ä½ è°ƒç”¨ NSButton çš„ setFrame çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ä½ æ›¿æ¢çš„ my_buttonSetFrame æ–¹æ³•å’Œ NSView çš„åŸå§‹çš„ setFrame çš„æ–¹æ³•ã€‚ ç›¸åçš„ï¼Œå¦‚æœé¡ºåºæ˜¯è¿™æ ·çš„è¯ï¼š 123[NSView swizzle:@selector(setFrame:) with:@selector(my_viewSetFrame:)];[NSControl swizzle:@selector(setFrame:) with:@selector(my_controlSetFrame:)];[NSButton swizzle:@selector(setFrame:) with:@selector(my_buttonSetFrame:)]; å°±ä¼šåˆ†åˆ«è°ƒç”¨ NSButton ã€ NSControl å’Œ NSView çš„äº¤æ¢åçš„æ–¹æ³•ï¼Œè¿™ä¸ªé¡ºåºåº”è¯¥æ¥è¯´æ‰æ˜¯æ­£ç¡®çš„ã€‚ æ‰€ä»¥å…¶å®è¿™è¾¹è¿˜æ˜¯å»ºè®®åœ¨ +(void)load æ–¹æ³•é‡Œåšæ–¹æ³•äº¤æ¢ï¼Œå®ƒå¯ä»¥ä¿è¯çˆ¶ç±»çš„loadæ–¹æ³•åœ¨å­ç±»çš„æ–¹æ³•è°ƒç”¨å‰å…ˆè°ƒç”¨ï¼Œä¸ä¼šå‡ºé”™ã€‚ 6. ä¼šå¸¦æ¥å¾ˆå¤šç†è§£å’Œè°ƒè¯•ä¸Šçš„ä¸ä¾¿è¿™ä¸ªå°±ä¸ç”¨å¤šè¯´äº†ï¼Œç‰¹åˆ«æ˜¯æ²¡æœ‰æ–‡æ¡£çš„æ—¶å€™ã€‚æœ‰æ—¶å€™è¦æ˜¯é‡åˆ°åŒäº‹å†™åœ¨æŸä¸€ä¸ªè§’è½é‡Œçš„runtimeæ“ä½œä½†æ˜¯æ²¡äººçŸ¥é“çš„è¯ï¼Œæå‡ºäº†ä¸€äº›æ— æ³•é¢„è§çš„é—®é¢˜ï¼Œè°ƒè¯•èµ·æ¥å°±å¾ˆæ˜¯è›‹ç–¼ã€‚ æ­£ç¡®å§¿åŠ¿æ‰€ä»¥æ­£ç¡®çš„ Method Swizzling çš„å§¿åŠ¿æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ â‘  å¦‚ä¸Šé¢çš„ä½œè€…ä¸€ç›´å¼ºè°ƒçš„ï¼Œåœ¨loadé‡Œè¿›è¡Œæ–¹æ³•æ›¿æ¢ â‘¡å…¶å®ä¸Šé¢ä½œè€…ç»™å‡ºçš„ swizzleå®Œç¾å®šä¹‰ å·²ç»æ˜¯æ¯”è¾ƒæ­£ç¡®çš„å§¿åŠ¿äº†ã€‚ä½†æ˜¯è¿™é‡Œä¹Ÿè®°å½•ä¸‹å¦ä¸€ä¸ªé—®é¢˜ã€‚ ç½‘ä¸Šä¸€éƒ¨åˆ†çš„æ–‡ç« ï¼Œéƒ½ä¼šè®²åˆ°ï¼Œé€šè¿‡ Category å®ç° Method Swizzling çš„ä¾‹å­å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#import &lt;objc/runtime.h&gt;@implementation UIViewController (Tracking)+ (void)load &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; Class class = [self class]; SEL originalSelector = @selector(viewWillAppear:); SEL swizzledSelector = @selector(xxx_viewWillAppear:); Method originalMethod = class_getInstanceMethod(class, originalSelector); Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector); // When swizzling a class method, use the following: // Class class = object_getClass((id)self); // ... // Method originalMethod = class_getClassMethod(class, originalSelector); // Method swizzledMethod = class_getClassMethod(class, swizzledSelector); BOOL didAddMethod = class_addMethod(class, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); if (didAddMethod) &#123; class_replaceMethod(class, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); &#125; else &#123; method_exchangeImplementations(originalMethod, swizzledMethod); &#125; &#125;);&#125;#pragma mark - Method Swizzling- (void)xxx_viewWillAppear:(BOOL)animated &#123; [self xxx_viewWillAppear:animated]; NSLog(@\"viewWillAppear: %@\", self);&#125;@end ç„¶è€Œè¿™é‡Œæœ‰ä¸€ç‚¹ä¸å¤Ÿä¸¥è°¨ï¼Œä¹Ÿæ˜¯ä¹‹å‰æœ‰æåˆ°çš„å±é™©æ€§æ‰€åœ¨ï¼Œorigin_imp å¦‚æœä½¿ç”¨äº† _cmd å‚æ•°ï¼Œhookä¹‹åçš„_cmd æ˜¯ä¸ç¬¦åˆé¢„æœŸçš„ã€‚ å‡è®¾æˆ‘ä»¬ç°åœ¨è¦hook - (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event; é‚£ä¹ˆå¦‚æœå¦‚ä¸Šé‚£ä¹ˆå®ç°çš„è¯ï¼Œåœ¨ [self xxx_touchesBegan:touches withEvent:event]; å°±ä¼šå´©æºƒã€‚åŸå› æ˜¯è¿™ä¸ªå‡½æ•°é‡Œæœ‰ forwardTouchMethod, åæ±‡ç¼–åå®ç°ç±»ä¼¼ï¼š 1234567891011121314151617181920212223242526static void forwardTouchMethod(id self, SEL _cmd, NSSet *touches, UIEvent *event) &#123; // The responder chain is used to figure out where to send the next touch UIResponder *nextResponder = [self nextResponder]; if (nextResponder &amp;&amp; nextResponder != self) &#123; // Not all touches are forwarded - so we filter here. NSMutableSet *filteredTouches = [NSMutableSet set]; [touches enumerateObjectsUsingBlock:^(UITouch *touch, BOOL *stop) &#123; // Checks every touch for forwarding requirements. if ([touch _wantsForwardingFromResponder:self toNextResponder:nextResponder withEvent:event]) &#123; [filteredTouches addObject:touch]; &#125;else &#123; // This is interesting legacy behavior. Before iOS 5, all touches are forwarded (and this is logged) if (!_UIApplicationLinkedOnOrAfter(12)) &#123; [filteredTouches addObject:touch]; // Log old behavior static BOOL didLog = 0; if (!didLog) &#123; NSLog(@\"Pre-iOS 5.0 touch delivery method forwarding relied upon. Forwarding -%@ to %@.\", NSStringFromSelector(_cmd), nextResponder); &#125; &#125; &#125; &#125;]; // here we basically call [nextResponder touchesBegan:filteredTouches event:event]; [nextResponder performSelector:_cmd withObject:filteredTouches withObject:event]; &#125;&#125; å¦‚æœæˆ‘ä»¬exchangeäº† IMP, [nextResponder performSelector:_cmd withObject:filteredTouches withObject:event]; æ˜¯æ²¡æœ‰ç›¸åº”çš„å®ç°çš„ï¼Œ_cmd å°±å˜æˆäº† æˆ‘ä»¬æ›¿æ¢çš„ SELã€‚ æ˜¾ç„¶ï¼ŒnextResponderæ²¡æœ‰å®ç°ç›¸åº”çš„æ–¹æ³•ï¼Œå°±ä¼šcrashã€‚ é‚£ä¹ˆè¿™é‡Œå¯ä»¥è¿™ä¹ˆå†™ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142static IMP __original_TouchesBegan_Method_Imp;@implementation UIView (Debug)+ (void)load &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; Class class = [self class]; SEL originalSelector = @selector(touchesBegan:withEvent:); SEL swizzledSelector = @selector(dae_touchesBegan:withEvent:); Method originalMethod = class_getInstanceMethod(class, originalSelector); Method swizzledMethod = class_getInstanceMethod(class, swizzledSelector); __original_TouchesBegan_Method_Imp = method_getImplementation(originalMethod); BOOL didAddMethod = class_addMethod(class, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod)); if (didAddMethod) &#123; class_replaceMethod(class, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod)); &#125; else &#123; method_exchangeImplementations(originalMethod, swizzledMethod); &#125; &#125;);&#125;- (void)dae_touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; // custom void (*functionPointer)(id, SEL, NSSet&lt;UITouch *&gt; *, UIEvent *) = (void(*)(id, SEL, NSSet&lt;UITouch *&gt; *, UIEvent*))__original_TouchesBegan_Method_Imp; functionPointer(self, _cmd, touches, event);&#125; è¿™æ ·å°±èƒ½æ‰¾åˆ°æ­£ç¡®çš„IMPäº†ã€‚ å‚è€ƒé“¾æ¥Method Swizzling çš„æ­£ç¡®é€”å¾„The Right Way to Swizzle in Objective-CWhat are the Dangers of Method Swizzling in Objective C?","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://shixiong.name/tags/iOS/"},{"name":"Runtime","slug":"Runtime","permalink":"https://shixiong.name/tags/Runtime/"},{"name":"Objective-C","slug":"Objective-C","permalink":"https://shixiong.name/tags/Objective-C/"},{"name":"Method Swizzling","slug":"Method-Swizzling","permalink":"https://shixiong.name/tags/Method-Swizzling/"}]},{"title":"ç”±äºPythonç‰ˆæœ¬å¤ªä½é‡åˆ°çš„ç¯å¢ƒé—®é¢˜å¤‡å¿˜","slug":"python-backend-memo","date":"2019-02-25T07:57:53.000Z","updated":"2019-07-30T02:17:17.770Z","comments":true,"path":"2019/02/25/python-backend-memo/","link":"","permalink":"https://shixiong.name/2019/02/25/python-backend-memo/","excerpt":"","text":"è¿™ä¸¤å¤©åœ¨å€’è…¾ç”¨Pythonå†™ä¸ªæ¥å£ï¼Œé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œç‰¹æ­¤åšä¸‹è®°å½•å¤‡å¿˜ï¼Œæ–¹ä¾¿åé¢æŸ¥é˜…ã€‚ Error - A true SSLContext object is not available InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSLappropriately and may cause certain SSL connections to fail. For more information, see https://urllib3.readthedocs.org/en/latest/security.html#insecureplatformwarning. è¿™æ˜¯å› ä¸ºæˆ‘æœåŠ¡å™¨ä¸Šçš„Pythonç‰ˆæœ¬å¤ªä½äº†ï¼Œå¦‚æœPythonç‰ˆæœ¬ä½äº2.7.9ä¹‹å‰çš„è¯ï¼Œå°±ä¼šæœ‰è¿™ä¸ªé”™è¯¯æç¤ºï¼Œå› ä¸º2.7.9ä¹‹å‰çš„Pythonæä¾›çš„SSLç¯å¢ƒä¸æ˜¯å¾ˆå®‰å…¨ã€‚ æ‰€ä»¥ç†æ‰€å½“ç„¶æˆ‘ä»¬å°±è¦å‡çº§Pythonçš„ç‰ˆæœ¬äº†ã€‚ Install Python3.7cat /etc/redhat-release çœ‹äº†ä¸€çœ¼ç³»ç»Ÿæ˜¯ CentOS 6 äºæ˜¯å…ˆä½¿ç”¨yumå®‰è£…ç¯å¢ƒä¾èµ–ã€‚ 1234567891011121314151617181920212223242526272829303132333435# wget ç”¨äºä¸‹è½½æºç åŒ…# gcc å’Œ make ç”¨äºç¼–è¯‘yum install wget gcc make#makeæŠ¥é”™ï¼ŒPython æœ‰ä¸ªå¾ˆé‡è¦çš„å†…å»ºæ¨¡å— zipimport ç”¨äºä» Zip å‹ç¼©åŒ…ä¸­å¯¼å…¥æ¨¡å—#zipimport.ZipImportError: can't decompress data; zlib not availableyum install zlib-devel#make installæŠ¥é”™ï¼Œ#ModuleNotFoundError: No module named â€˜_ctypesâ€™yum install libffi-devel# è§£å†³ import ssl æŠ¥é”™ No module named '_ssl'yum install openssl-devel# è§£å†³ import bz2 æŠ¥é”™yum install bzip2-devel# è§£å†³ import curses æŠ¥é”™yum install ncurses-devel# è§£å†³ import sqlite3 æŠ¥é”™yum install sqlite-devel# è§£å†³ _dbm _gdbm ç¼ºå¤±æé†’yum install gdbm-devel# è§£å†³ _lzma ç¼ºå¤±æé†’yum install xz-devel# è§£å†³ _tkinter ç¼ºå¤±æé†’yum install tk-devel# è§£å†³ readline ç¼ºå¤±æé†’åŠæ–¹å‘é”®è¡Œä¸ºéé¢„æœŸçš„é—®é¢˜yum install readline-devel ç„¶åä¸‹è½½æºç åŒ… wget https://www.python.org/ftp/python/3.7.1/Python-3.7.1.tar.xz è§£å‹ç¼© 12xz -d Python-3.7.1.tar.xztar -xvf Python-3.7.1.tar ç¼–è¯‘&amp;å®‰è£… 12345cd Python-3.7.1#--prefix æ˜¯é¢„æœŸå®‰è£…ç›®å½•ï¼Œ--enable-optimizations æ˜¯ä¼˜åŒ–é€‰é¡¹ï¼ˆLTOï¼ŒPGO ç­‰ï¼‰./configure --prefix=/usr/local/python3.7 --enable-optimizations# å®‰è£…make &amp;&amp; make install æ·»åŠ è½¯é“¾æ¥ 12ln -s /usr/local/python3.7/bin/python3.7 /usr/bin/python3ln -s /usr/local/python3.7/bin/pip3.7 /usr/bin/pip3 è¿™æ ·å­åº”è¯¥ä¸€åˆ‡å°±æå®šå•¦ã€‚ç„¶è€Œï¼Œäº‹æƒ…å¥½åƒæ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚ å½“æˆ‘å°è¯•ä½¿ç”¨ pip3 install flask çš„æ—¶å€™ï¼ŒæŠ¥é”™ã€‚ Error - OpenSSL version pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available. å‰è¾¹è¯´è¿‡ï¼Œæˆ‘çš„æœåŠ¡å™¨ç³»ç»Ÿæ˜¯CentOS 6ï¼Œé»˜è®¤çš„OpenSSLç‰ˆæœ¬æ˜¯1.0.1ï¼Œè€ŒPython3.7éœ€è¦OpenSSL1.0.2æˆ–è€…1.1.xæ‰è¡Œï¼Œäºæ˜¯æˆ‘ä»¬éœ€è¦å¯¹OpenSSLè¿›è¡Œå‡çº§å¹¶ä¸”é‡æ–°ç¼–è¾‘Pyton3.7ã€‚ å‡çº§OpenSSLä¸‹è½½æœ€æ–°ç‰ˆçš„OpenSSL wget https://www.openssl.org/source/openssl-1.1.1-pre8.tar.gz ç¼–è¯‘&amp;å®‰è£… 123cd openssl-1.1.1-pre8./config --prefix=/usr/local/openssl no-zlib #ä¸éœ€è¦zlibmake &amp; make install å¤‡ä»½åŸé…ç½® 12mv /usr/bin/openssl /usr/bin/openssl.bakmv /usr/include/openssl/ /usr/include/openssl.bak æ·»åŠ è½¯é“¾æ¥ 123ln -s /usr/local/openssl/include/openssl /usr/include/opensslln -s /usr/local/openssl/lib/libssl.so.1.1 /usr/local/lib64/libssl.soln -s /usr/local/openssl/bin/openssl /usr/bin/openssl ä¿®æ”¹ç³»ç»Ÿé…ç½® 1234#å†™å…¥opensslåº“æ–‡ä»¶çš„æœç´¢è·¯å¾„echo \"/usr/local/openssl/lib\" &gt;&gt; /etc/ld.so.conf#ä½¿ä¿®æ”¹åçš„/etc/ld.so.confç”Ÿæ•ˆ ldconfig -v é‡æ–°ç¼–è¯‘Python3.7 12345cd Python-3.7.1#--prefix æ˜¯é¢„æœŸå®‰è£…ç›®å½•ï¼Œ--enable-optimizations æ˜¯ä¼˜åŒ–é€‰é¡¹ï¼ˆLTOï¼ŒPGO ç­‰ï¼‰./configure --prefix=/usr/local/python3.7 --enable-optimizations --with-openssl=/usr/local/openssl# å®‰è£…make &amp;&amp; make install è‡³æ­¤ï¼Œæ‰€æœ‰é—®é¢˜éƒ½è§£å†³äº†ã€‚æ„Ÿæƒ³ï¼šLinuxé‡Œçš„ç›¸å…³ç¯å¢ƒé…ç½®ï¼ŒçœŸæ˜¯ä¸€é—¨å¤§å­¦é—®å•Š å‚è€ƒFlaskå®‰è£…: A true SSLContext object is not availableCentOS 7 ä¸‹å®‰è£… Python3.7.1python3.7å®‰è£…åsslé—®é¢˜","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"https://shixiong.name/tags/Python/"},{"name":"Flask","slug":"Flask","permalink":"https://shixiong.name/tags/Flask/"},{"name":"OpenSSL","slug":"OpenSSL","permalink":"https://shixiong.name/tags/OpenSSL/"},{"name":"Linux","slug":"Linux","permalink":"https://shixiong.name/tags/Linux/"}]},{"title":"Sublime Text ä½¿ç”¨å¤‡å¿˜","slug":"sublimetext-remind","date":"2018-12-24T13:56:15.000Z","updated":"2019-07-30T02:17:17.770Z","comments":true,"path":"2018/12/24/sublimetext-remind/","link":"","permalink":"https://shixiong.name/2018/12/24/sublimetext-remind/","excerpt":"","text":"å¿«æ·é”®å¤‡å¿˜ ã€control+tabã€‘ï¼šåœ¨tabä¹‹é—´åˆ‡æ¢ ã€command+jã€‘ï¼šåˆå¹¶ä¸¤è¡Œ ã€command+lã€‘ï¼šé€‰æ‹©å½“å‰è¡Œ ã€command+enterã€‘ï¼šä¸‹ä¸€è¡Œå¼€è¾Ÿæ–°è¡Œ ã€shift+command+enterã€‘ï¼šä¸Šä¸€è¡Œå¼€è¾Ÿæ–°è¡Œ ã€option+é¼ æ ‡å·¦é”®ã€‘ï¼šå—é€‰æ‹©å¹¶è¿›å…¥å¤šç‚¹ç¼–è¾‘æ¨¡å¼ ã€option+å·¦å³é”®ã€‘ï¼šç§»åŠ¨ä¸€ä¸ªå•è¯ï¼ˆ+shift åŒæ—¶è¿›è¡Œé€‰æ‹©ï¼‰ ã€command+å·¦å³é”®ã€‘ï¼šè¡Œé¦–è¡Œä½åˆ‡æ¢ ã€shift+command+pã€‘ï¼šåœ¨å‘½ä»¤ä¸­ç›´æ¥è¾“å…¥æ–‡æ¡£ç±»å‹ï¼ˆå¦‚cssç­‰å¯ç›´æ¥åˆ‡æ¢ï¼‰ ã€shift+command+pã€‘ï¼šreindent lines ä»£ç é£æ ¼ç¼©è¿› é…ç½®æ–‡ä»¶é‚£ä¹ˆå¦‚ä½•ç»‘å®šå¿«æ·é”®å‘¢ï¼Œé¦–å…ˆ shift+command+p æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥keybindingsï¼Œç‚¹å‡» Key Bindings - Userï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ [{&quot;key&quot;: [&quot;shift+tab&quot;], &quot;command&quot;: &quot;reindent&quot;, &quot;agrs&quot;: {&quot;single_line&quot;: false }},]ã€‚ é‚£ä¹ˆå¦‚ä½•çŸ¥é“å…·ä½“å‘½ä»¤æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¯ä»¥é€šè¿‡ control+` æ‰“å¼€å·¥ä½œå°ï¼Œåœ¨å·¥ä½œå°ä¸­è¾“å…¥ sublime.log_commands(True)ï¼Œç„¶åå†é€šè¿‡shift+command+pæ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ reindent lines, å°±å¯ä»¥åœ¨ä¸‹è¾¹çš„å·¥ä½œå°ä¸­çœ‹åˆ°å…·ä½“å‘½ä»¤ååŠå‚æ•°äº†ã€‚ é‚£ä¹ˆæ‰€æœ‰çš„é…ç½®éƒ½ä¿å­˜åˆ°å“ªäº†å‘¢ï¼Ÿ å¯ä»¥ç‚¹å‡»å·¦ä¸Šè§’çš„ Sublime Text - Preferences - browse Packages...è¿™ä¸ªæ—¶å€™åº”è¯¥ä¼šæ‰“å¼€åˆ°è¿™ä¸ªç›®å½•ä¸‹ ~/Library/Application Support/Sublime Text 3/Packagesï¼Œå…·ä½“çš„æ ¹æ®ç¯å¢ƒä¸åŒè·¯å¾„ä¼šä¸åŒã€‚ åœ¨è¯¥ç›®å½•ä¸‹ï¼Œç”¨æˆ·çš„æ‰€æœ‰é…ç½®é¡¹ä¼šå­˜åœ¨Useræ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”è¿™äº›é…ç½®æ–‡ä»¶éƒ½æ˜¯çº¯æ–‡æœ¬çš„ï¼Œæ‰€ä»¥å¯ä»¥æ”¯æŒç‰ˆæœ¬æ§åˆ¶ã€‚ é™¤äº†è¿™ä¸ªä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›è‡ªå®šä¹‰é¡¹ä¹Ÿå¯ä»¥é€šè¿‡ shift+command+p æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ settings æ‰“å¼€ Preferences: Settings - User ä¾¿å¯æ‰¾åˆ°é…ç½®è‡ªå®šä¹‰é…ç½®é¡¹çš„é…ç½®æ–‡ä»¶äº†ã€‚ ä½¿ç”¨Packages Controlå®‰è£…æ‰©å±•åŒ…å®‰è£… Packages Control çš„æ–¹æ³•å¯ä»¥å‚è€ƒè¿™ä¸ª Installation - Package Control å®˜ç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šåº“å¯ä¾›é€‰æ‹©ã€‚å®‰è£…å®ŒPackages Controlä¹‹åï¼ŒåŒ…éƒ½ä¼šå­˜æ”¾åœ¨ ~/Library/Application Support/Sublime Text 3/Packages é‡Œè¾¹çš„ Installed Packages é‡Œã€‚å¹¶ä¸”ä¼šåœ¨ Packages/User é‡Œæ–°åŠ ä¸€ä¸ª Packge Control.sublime-settings é…ç½®é¡¹ã€‚ æ¨èçš„ä¸€äº›æ‰©å±•åŒ… AdvancedNewFileEmmetGitSassSublimeERBSyncedSideBar å¿«é€ŸæŸ¥æ‰¾æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ command+p ç›´æ¥è¾“å…¥æ¨¡ç³Šæœç´¢ï¼š eg: æ¨¡ç³Šæœç´¢å+å†’å·+è¡Œå·ï¼Œå¦‚ï¼šdemo:10ï¼Œå…‰æ ‡ä¼šç›´æ¥åœåœ¨ç¬¬10è¡Œeg: æœç´¢å@å‡½æ•°åä¼šè·³è½¬åˆ°å‡½æ•°åï¼Œå¦‚ï¼šdemo@new å¯ä»¥é€šè¿‡ command+f åœ¨æœ¬æ–‡ä»¶ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼š enterï¼šæœç´¢ä¸‹ä¸€å¤„ï¼›shift+enterï¼šæœç´¢ä¸Šä¸€å¤„ï¼›escï¼šåœåœ¨å½“å‰å•è¯command+d næ¬¡ï¼Œå¯ä»¥åŒæ—¶ç¼–è¾‘ï¼Œå¹¶è¿›å…¥å¤šç‚¹ç¼–è¾‘ è¦åœ¨æ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾çš„è¯ï¼Œéœ€è¦åœ¨æ–‡ä»¶å¤¹ä¸Šå³é”®ï¼Œç‚¹å‡» find in finderï¼Œä¼šæŠŠç›¸åº”çš„å†…å®¹è®°åœ¨ä¸€ä¸ªæ–‡æœ¬é‡Œï¼ŒæŒ‰F4å¯ä»¥è·³è½¬åˆ°ç¬¬ä¸€ä¸ªæŸ¥æ‰¾é¡¹ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æ–‡æœ¬é‡Œç”¨é¼ æ ‡åŒå‡»æ‰“å¼€ã€‚ è·³èµ°äº†å¯ä»¥ç”¨ control+- ç›´æ¥è·³å›å»ã€‚å¦‚æœè·³å¤šäº†ï¼Œå¯ä»¥ control+shift+- å¯ä»¥å†è¿›è¡Œå›åˆ°ä¸Šä¸€çº§çš„æ“ä½œã€‚ Emmetç‰›é€¼ï¼ï¼ˆtodoï¼‰ ä»£ç ç‰‡æ®µï¼ˆtodoï¼‰ è‡ªåŠ¨è¡¥é½ï¼ˆtodoï¼‰ /userä¸‹çš„ damemon.sublime-completions sublimeCodeIntel build systemï¼ˆtodoï¼‰","categories":[],"tags":[{"name":"sublime text","slug":"sublime-text","permalink":"https://shixiong.name/tags/sublime-text/"}]},{"title":"ä¸CocoapodsæŠ—æˆ˜çš„ä¸€å¤©","slug":"fight-with-cocoapods","date":"2018-05-22T14:43:54.000Z","updated":"2019-07-30T02:17:17.769Z","comments":true,"path":"2018/05/22/fight-with-cocoapods/","link":"","permalink":"https://shixiong.name/2018/05/22/fight-with-cocoapods/","excerpt":"","text":"åœ¨å‡çº§Macç³»ç»Ÿåˆ°macOS High Sierraï¼ˆ10.13.4ï¼‰çš„æ—¶å€™ï¼Œå‡ºç°å‡çº§å¤±è´¥å¯¼è‡´å¼€ä¸äº†æœºï¼Œæ‰€æœ‰çš„æ•°æ®å…¨æ²¡äº†ã€‚ğŸŒ¶ğŸ”ğŸğŸ’Šä¹‹å‰çš„ç³»ç»Ÿç¯å¢ƒéƒ½è¦å…¨éƒ¨é‡æ–°é…ç½®ï¼Œåœ¨é…ç½®cocoapodsçš„æ—¶å€™é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œç‰¹æ­¤è®°å½•ã€‚ å®‰è£…cocoapodsä¾èµ–çš„ç¯å¢ƒè¿™æ­¥ç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œå°±ä¸å†èµ˜è¿°ã€‚ç„¶è€Œå®‰è£…å®Œåï¼Œåœ¨æ‰§è¡Œ pod install æˆ– pod update æ—¶ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š 12345678910111213141516ArgumentError - Malformed version number string/Library/Ruby/Site/2.3.0/rubygems/version.rb:209:in `initialize&apos;/Library/Ruby/Site/2.3.0/rubygems/version.rb:200:in `new&apos;/Library/Ruby/Site/2.3.0/rubygems/version.rb:200:in `new&apos;/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.2/lib/cocoapods/generator/xcconfig/aggregate_xcconfig.rb:123:in `embedded_content_settings&apos;/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.2/lib/cocoapods/generator/xcconfig/aggregate_xcconfig.rb:68:in `generate&apos;/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.2/lib/cocoapods/generator/xcconfig/aggregate_xcconfig.rb:39:in `save_as&apos;.../Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.2/lib/cocoapods/installer.rb:183:in `generate_pods_project&apos;/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.2/lib/cocoapods/installer.rb:119:in `install!&apos;/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.2/lib/cocoapods/command/install.rb:41:in `run&apos;/Library/Ruby/Gems/2.3.0/gems/claide-1.0.2/lib/claide/command.rb:334:in `run&apos;/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.2/lib/cocoapods/command.rb:52:in `run&apos;/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.2/bin/pod:55:in `&lt;top (required)&gt;&apos;/usr/bin/pod:23:in `load&apos;/usr/bin/pod:23:in `&lt;main&gt;&apos; ï¼ˆä¸€è„¸æ‡µé€¼â€¦ï¼‰ Googleæœäº†ä¸€å †ä¹Ÿæ²¡æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œåæ¥åœ¨Cocoapodsçš„issuesé‡Œæ‰¾åˆ°ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ: jcharr1: I came across this issue today, too, when trying to run â€œpod install.â€ What version of Rubygems are you running? For me, I had updated with gem update --system which brought me up to v2.7.7. Downgrading to 2.7.6 with gem update --system 2.7.6 fixed this for me. è¿™ä½ jcharr1 è¯´gemç‰ˆæœ¬å¤ªé«˜äº†å¯¼è‡´çš„ï¼Œä»–é™çº§åˆ°2.7.6å°±å¯ä»¥äº†ã€‚äºæ˜¯æˆ‘ä¹Ÿå°è¯•ç€é™çº§äº†ä¸€ä¸‹ï¼Œæœç„¶è§£å†³äº†ï¼ä¸è¿‡å…¶ä¸­ç¼˜ç”±ä¸å¾—è€ŒçŸ¥ï¼Œæœ‰æ—¶é—´å†ç ”ç©¶ä¸€ä¸‹ã€‚ Pod installç°åœ¨å¯ä»¥æ­£å¸¸ pod install å’Œ pod update äº†å—ï¼Ÿå¹¶ä¸ã€‚å½“æˆ‘æŒ‰ä¸‹å›è½¦é”®ä¹‹åï¼Œåˆå‡ºç°äº†ä¸€ä¸ªå°é—®é¢˜ï¼š 1234Analyzing dependenciesPre-downloading: `XXXX` from `http://xxx.com/xxx/xxx.git`, tag `xxx_6.9.5`Username for &apos;http://xxx.com&apos;: aaaPassword for &apos;http://aaa@xxx.com&apos;: å…¶å®è¿™ä¸ªè¾“å…¥è´¦å·å¯†ç å°±èƒ½è§£å†³é—®é¢˜äº†ï¼Œä½†æ˜¯æˆ‘æ¯”è¾ƒå¥½å¥‡çš„æ˜¯æˆ‘å·²ç»æœ‰æ·»åŠ äº† SSH Keyï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šè¦æˆ‘è¾“å…¥è´¦å·å¯†ç å‘¢ï¼ŸåŸæ¥ï¼Œå½“æˆ‘ä»¬çš„podç»„ä»¶çš„åœ°å€ä½¿ç”¨çš„æ˜¯ http/https åœ°å€çš„æ—¶å€™ï¼Œå°±ä¼šä½¿ç”¨è´¦å·å¯†ç éªŒè¯ï¼Œå½“ä½¿ç”¨sshåœ°å€çš„æ—¶å€™ï¼Œå°±ä¼šç”¨ SSH Key éªŒè¯ã€‚æ‰€ä»¥å½“æˆ‘ä»¬ä¸æƒ³è¾“å…¥è´¦å·å¯†ç çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨ ~/.gitconfig ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š 123456[url &quot;git@github.com:&quot;] insteadOf = https://github.com/[url &quot;git@github.com:&quot;] pushInsteadOf = &quot;git://github.com/&quot;[url &quot;git@github.com:&quot;] pushInsteadOf = &quot;https://github.com/&quot; ç›¸å…³åœ°å€å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µå…·ä½“ä¿®æ”¹ï¼Œä¿®æ”¹å®Œä¹‹åå°±ä¼šå¼ºåˆ¶ä½¿ç”¨ ssh éªŒè¯äº†ã€‚ ç„¶å pod installï¼Œå¯ä»¥äº†å—ï¼Ÿä¸ï¼å®ƒåˆå‡ºé”™äº†ã€‚ 12[!] Error installing MTCameraAR[!] Failed to download &apos;MTCameraAR&apos; ï¼ˆä¸€è„¸æ‡µé€¼againâ€¦ï¼‰ åæ¥å°è¯•å¸è½½é‡è£…cocoapodsï¼Œéƒ½ä¸è¡Œã€‚æ­£å½“æ— å¯å¥ˆä½•ä¹‹é™…ï¼Œçªç„¶æƒ³èµ·æ¥ï¼Œpodæœ‰ --verbose è¿™ä¸ªå‚æ•°å•Šï¼Œè¯´ä¸å®šä¼šæœ‰å¸®åŠ©ã€‚äºæ˜¯ pod install --verbose å…³é”®çš„é”™è¯¯å°±å‡ºç°äº†ï¼Œ git-lfs: command not foundç”±äºè¿™ä¸ªåº“çš„æ–‡ä»¶éƒ½å¾ˆå¤§ï¼Œæ²¡æœ‰ä½¿ç”¨git-lfsçš„è¯ä¼šè¶…æ—¶ï¼Œæ— æ³•æˆåŠŸæ‹‰å–ã€‚æ‰€ä»¥åªè¦å®‰è£…git-lfså°±å¥½äº†ã€‚ bingoï¼é—®é¢˜éƒ½è§£å†³äº†ã€‚","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://shixiong.name/tags/iOS/"}]},{"title":"ç”¨ Swift åè®®æ‰©å±•å’Œæ³›å‹æ¥å®ç°å¤ç”¨[è¯‘]","slug":"yong-swift-xieyi-tuozhan-fuyong","date":"2016-11-11T12:56:15.000Z","updated":"2019-07-30T02:17:17.771Z","comments":true,"path":"2016/11/11/yong-swift-xieyi-tuozhan-fuyong/","link":"","permalink":"https://shixiong.name/2016/11/11/yong-swift-xieyi-tuozhan-fuyong/","excerpt":"","text":"ä½œä¸ºä¸€ä¸ªiOSå¼€å‘è€…ï¼Œæœ€å¸¸ç”¨çš„ä»»åŠ¡å°±æ˜¯é€šè¿‡è‡ªå®šä¹‰cellçš„å­ç±»ï¼Œæ¥å®ç°UITableViewæˆ–è€…UICollectionViewçš„è‡ªå®šä¹‰ã€‚å¹¶ä¸” UITableView å’Œ UICollectionView åœ¨æ³¨å†Œè‡ªå®šä¹‰cellå­ç±»è¿™ä¸€å—éƒ½æœ‰éå¸¸ç±»ä¼¼çš„API: 12public func registerClass(cellClass: AnyClass?, forCellWithReuseIdentifier identifier: String)public func registerNib(nib: UINib?, forCellWithReuseIdentifier identifier: String) å¯¹äºæ³¨å†Œcellçš„è‡ªå®šä¹‰æœ€å¸¸ç”¨çš„è§£å†³åŠæ³•å°±æ˜¯ï¼Œå£°æ˜ä¸€ä¸ªreuseIdentifierçš„å¸¸é‡ï¼Œåƒä¸‹é¢è¿™æ ·: 1234567891011121314151617181920212223private let reuseIdentifier = \"BookCell\"class BookListViewController: UIViewController, UICollectionViewDataSource &#123; @IBOutlet private weak var collectionView: UICollectionView! override func viewDidLoad() &#123; super.viewDidLoad() let nib = UINib(nibName: \"BookCell\", bundle: nil) self.collectionView.registerNib(nib, forCellWithReuseIdentifier: reuseIdentifier) &#125; func collectionView(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath) -&gt; UICollectionViewCell &#123; let cell = collectionView.dequeueReusableCellWithReuseIdentifier(reuseIdentifier, forIndexPath: indexPath) if let bookCell = cell as? BookCell &#123; // TODO: configure cell &#125; return cell &#125;&#125; æ¥ä¸‹æ¥è®©æˆ‘ä»¬å°è¯•ç€ä½¿ç”¨æ³›å‹æ¥è®©å®ƒç®€å•åŒ–å’Œå®‰å…¨åŒ–ã€‚ é¦–å…ˆï¼Œå¦‚æœåœ¨æˆ‘ä»¬çš„ä»£ç å½“ä¸­èƒ½ä¸éœ€è¦åˆ°å¤„å£°æ˜reuse identifierå¸¸é‡ï¼Œé‚£å°±å†å¥½ä¸è¿‡äº†ã€‚è€Œäº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨è‡ªå®šä¹‰cellçš„ç±»åæ¥å½“åš é»˜è®¤çš„reuseIdentifierã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªReuseable Viewsçš„åè®®å¹¶ä¸”åˆ›å»ºé»˜è®¤çš„å£°æ˜æ–¹æ³•ç»™ UIView çš„å­ç±»ä»¬ã€‚ 123456789101112protocol ReusableView: class &#123; static var defaultReuseIdentifier: String &#123; get &#125;&#125;extension ReusableView where Self: UIView &#123; static var defaultReuseIdentifier: String &#123; return NSStringFromClass(self) &#125;&#125;extension UICollectionViewCell: ReusableView &#123;&#125; é€šè¿‡è®© UICollectionViewCell éµå¾ª ReusableView åè®®ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ¯ä¸ªcellå­ç±»çš„ä¸€ä¸ªå”¯ä¸€çš„é‡ç”¨æ ‡è¯†ã€‚ 12let identifier = BookCell.defaultReuseIdentifier// identifier = \"MyModule.BookCell\" æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡åŒæ ·çš„æ–¹æ³•ï¼Œå°†æ³¨å†ŒNibæ­¥éª¤ä¸­çš„ä¸€äº›è„ä»£ç ç»™å»é™¤æ‰ã€‚ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Nib Loadable Views çš„åè®®å¹¶é€šè¿‡åè®®æ‹“å±•æ·»åŠ ä¸€ä¸ªé»˜è®¤æ–¹æ³•å®ç°ã€‚ 123456789101112protocol NibLoadableView: class &#123; static var nibName: String &#123; get &#125;&#125;extension NibLoadableView where Self: UIView &#123; static var nibName: String &#123; return NSStringFromClass(self).componentsSeparatedByString(\".\").last! &#125;&#125;extension BookCell: NibLoadableView &#123;&#125; é€šè¿‡è®©æˆ‘ä»¬çš„ BookCell ç±»éµå¾ª NibLoadableView åè®®ï¼Œç°åœ¨æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªæ›´å®‰å…¨å’Œæ–¹ä¾¿çš„æ–¹æ³•å»è·å¾—åˆ°Nibçš„åç§°ã€‚ 12let nibName = BookCell.nibName// nibName = \"BookCell\" æœ‰è¿™ä¸¤ä¸ªåè®®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ Swiftçš„æ³›å‹ å¹¶ä¸”é€šè¿‡æ‹“å±• UICollectionView æ¥ç®€åŒ–cellçš„æ³¨å†Œå’Œä½¿ç”¨ã€‚ 123456789101112131415161718192021extension UICollectionView &#123; func register&lt;T: UICollectionViewCell where T: ReusableView&gt;(_: T.Type) &#123; registerClass(T.self, forCellWithReuseIdentifier: T.defaultReuseIdentifier) &#125; func register&lt;T: UICollectionViewCell where T: ReusableView, T: NibLoadableView&gt;(_: T.Type) &#123; let bundle = NSBundle(forClass: T.self) let nib = UINib(nibName: T.nibName, bundle: bundle) registerNib(nib, forCellWithReuseIdentifier: T.defaultReuseIdentifier) &#125; func dequeueReusableCell&lt;T: UICollectionViewCell where T: ReusableView&gt;(forIndexPath indexPath: NSIndexPath) -&gt; T &#123; guard let cell = dequeueReusableCellWithReuseIdentifier(T.defaultReuseIdentifier, forIndexPath: indexPath) as? T else &#123; fatalError(\"Could not dequeue cell with identifier: \\(T.defaultReuseIdentifier)\") &#125; return cell &#125; &#125; æ³¨æ„è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªç‰ˆæœ¬çš„æ³¨å†Œæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ç”¨æ¥æ³¨å†Œ ReusableView å­ç±»ç”¨çš„ï¼Œä¸€ä¸ªæ˜¯ç”¨æ¥æ³¨å†Œ ReusableView å’Œ NibLoadableViewçš„å­ç±»ã€‚è¿™å¾ˆå¥½çš„å°†view controllerçš„ç‰¹å®šçš„æ³¨å†Œæ–¹æ³•åˆ†ç¦»å‡ºæ¥ã€‚ å¦ä¸€ä¸ªæ¯”è¾ƒæ£’çš„ç»†èŠ‚å°±æ˜¯ dequeueReusableCell æ–¹æ³•ä¸å†éœ€è¦ç»™ä»–ä»»ä½•é‡ç”¨æ ‡è¯†å­—ç¬¦ä¸²è€Œä¸”å¯ä»¥ç›´æ¥ä½¿ç”¨cellçš„å­ç±»ä½œä¸ºè¿”å›å€¼ã€‚ ç°åœ¨cellçš„æ³¨å†Œå’Œä½¿ç”¨ä»£ç çœ‹èµ·æ¥æ£’æäº† :) ã€‚ 1234567891011121314151617181920class BookListViewController: UIViewController, UICollectionViewDataSource &#123; @IBOutlet private weak var collectionView: UICollectionView! override func viewDidLoad() &#123; super.viewDidLoad() self.collectionView.register(BookCell.self) &#125; func collectionView(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath) -&gt; UICollectionViewCell &#123; let cell: BookCell = collectionView.dequeueReusableCell(forIndexPath: indexPath) // TODO: configure cell return cell &#125; ...&#125; æ€»ç»“å¦‚æœä½ æ˜¯ä» Objective-C è½¬åˆ° Swift çš„è¯ï¼Œç ”ç©¶Swiftå¼ºå¤§çš„æ–°ç‰¹æ€§æ¯”å¦‚ åè®®æ‹“å±•ã€ æ³›å‹ï¼Œ ä»è€Œæ‰¾åˆ°æ›´ä¼˜é›…çš„å®ç°æ–¹å¼å’Œæ›¿ä»£æ–¹æ³•æ˜¯éå¸¸å€¼å¾—çš„ã€‚","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://shixiong.name/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"https://shixiong.name/tags/Swift/"}]},{"title":"è´å¡å°”æ›²çº¿æŒ‡åŒ—","slug":"bezier-zhibei","date":"2016-11-03T09:37:01.000Z","updated":"2019-07-30T02:17:17.743Z","comments":true,"path":"2016/11/03/bezier-zhibei/","link":"","permalink":"https://shixiong.name/2016/11/03/bezier-zhibei/","excerpt":"","text":"æœ€è¿‘åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°ä¸€ä¸ªåŠ¨ç”»ï¼Œéå¸¸ç®€å•çš„åŠ¨ç”»ï¼Œç®€å•åˆ°å°±æ˜¯ç›´æ¥å¯¹ä¸€ä¸ªViewåšå¹³ç§»â€¦ ç„¶è€Œè™½ç„¶åŠ¨ç”»ç®€å•ï¼Œä½†æ˜¯å´å¾ˆä¸è‡ªç„¶ï¼Œå°è¯•äº†UIView Animationæä¾›çš„å„ç±»å‚æ•°ï¼Œéƒ½æ— æ³•è¾¾åˆ°æƒ³è¦çš„åŠ¨ç”»æ•ˆæœã€‚è¿™æ—¶å€™ï¼Œæˆ‘çš„è„‘å­é‡Œçªç„¶æƒ³èµ·ä¸€ä¸ªè¯â€¦ â€œè´å¡å°”æ›²çº¿â€â€¦. è¿™ä¸ªè¯ç»å¸¸çœ‹åˆ°ï¼Œä½†å´ä»æ²¡æœ‰å»äº†è§£è¿‡ï¼Œè¿™æ¬¡å°±è¶ç€æœ‰æ±‚äºå®ƒçš„é›…å…´ï¼Œå¥½å¥½åšä¸ªå…¥é—¨äº†è§£å¥½äº†ã€‚ ä»€ä¹ˆæ˜¯è´å¡å°”æ›²çº¿ï¼Ÿ æ˜¾è€Œæ˜“è§çš„æ˜¯ï¼Œè´å¡å°”æ›²çº¿ï¼Œåº”è¯¥å°±æ˜¯æ˜¯ä¸€ä¸ªå«è´å¡å°”çš„äººå‘æ˜çš„æ›²çº¿å§ï¼Œç„¶è€Œå†å²å‰§æœ¬å´ä¸æ˜¯è¿™ä¹ˆå†™çš„ã€‚è´å¡å°”æ›²çº¿æ‰€ä¾æ®çš„æœ€åŸå§‹çš„æ•°å­¦å…¬å¼ï¼Œæ˜¯æ—©åœ¨1912å¹´å°±å¹¿ä¸ºäººçŸ¥çš„ä¼¯æ©æ–¯å¦å¤šé¡¹å¼ã€‚OKï¼Œnowï¼ŒWhat is boensitan duoxiangshiï¼Ÿï¼ç®€å•æ¥è¯´ï¼Œä¼¯æ©æ–¯å¦å¤šé¡¹å¼å¯ä»¥ç”¨æ¥è¯æ˜ï¼Œåœ¨[ a, b ] åŒºé—´ä¸Šæ‰€æœ‰çš„è¿ç»­å‡½æ•°éƒ½å¯ä»¥ç”¨å¤šé¡¹å¼æ¥é€¼è¿‘ï¼Œå¹¶ä¸”æ”¶æ•›æ€§å¾ˆå¼ºï¼Œä¹Ÿå°±æ˜¯ä¸€è‡´æ”¶æ•›ã€‚å†ç®€å•ç‚¹ï¼Œå°±æ˜¯ä¸€ä¸ªè¿ç»­å‡½æ•°ï¼Œä½ å¯ä»¥å°†å®ƒå†™æˆè‹¥å¹²ä¸ªä¼¯æ©æ–¯å¦å¤šé¡¹å¼ç›¸åŠ çš„å½¢å¼ï¼Œå¹¶ä¸”ï¼Œéšç€ nâ†’âˆï¼Œè¿™ä¸ªå¤šé¡¹å¼å°†ä¸€è‡´æ”¶æ•›åˆ°åŸå‡½æ•°ï¼Œè¿™ä¸ªå°±æ˜¯ä¼¯æ©æ–¯å¦æ–¯çš„é€¼è¿‘æ€§è´¨ã€‚ ä¸çŸ¥é“åœ¨è¯´ä»€ä¹ˆé¬¼ï¼Ÿæ²¡å…³ç³»ï¼Œæ¥ç€è¯´.. åˆ°äº†1959å¹´ï¼Œå½“æ—¶å°±èŒäºé›ªé“é¾™çš„æ³•å›½æ•°å­¦å®¶ Paul de Casteljau å¼€å§‹å¯¹ä¼¯æ©æ–¯å¦å¤šé¡¹å¼è¿›è¡Œäº†å›¾å½¢åŒ–çš„å°è¯•ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ç§æ•°å€¼ç¨³å®šçš„å¾·å¡æ–¯ç‰¹é‡Œå¥¥ï¼ˆde Casteljauï¼‰ ç®—æ³•ã€‚æ ¹æ®è¿™ä¸ªç®—æ³•ï¼Œå°±å¯ä»¥åªé€šè¿‡å¾ˆå°‘çš„æ§åˆ¶ç‚¹ï¼Œå»ç”Ÿæˆå¤æ‚çš„å¹³æ»‘æ›²çº¿ï¼Œä¹Ÿå°±æ˜¯è´å¡å°”æ›²çº¿ã€‚ è€Œè´å¡å°”æ›²çº¿çš„å¾—åï¼Œå¾—å½’åŠŸäº1962å¹´å°±èŒäºé›·è¯ºçš„æ³•å›½å·¥ç¨‹å¸ˆçš®åŸƒå°”Â·è´å¡å°”ï¼ˆPierre BÃ©zierï¼‰ï¼Œä»–ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥è¾…åŠ©æ±½è½¦çš„è½¦ä½“å·¥ä¸šè®¾è®¡ï¼Œå¹¶ä¸”å¹¿æ³›å®£ä¼ ï¼Œå› æ­¤å¤§å®¶æ‰éƒ½ç§°ä»–ä¸ºè´å¡å°”æ›²çº¿ ã€‚ è´å¡å°”æ›²çº¿æ˜¯æ€ä¹ˆç”»å‡ºæ¥çš„ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬åœ¨å¹³é¢å†…é€‰3ä¸ªä¸åŒçº¿çš„ç‚¹å¹¶ä¸”ä¾æ¬¡ç”¨çº¿æ®µè¿æ¥ã€‚å¦‚ä¸‹æ‰€ç¤º..æ¥ç€ï¼Œæˆ‘ä»¬åœ¨ABå’ŒBCçº¿æ®µä¸Šæ‰¾å‡ºç‚¹Då’Œç‚¹Eï¼Œä½¿å¾—AD/AB = BE/BCã€‚å†æ¥ç€ï¼Œè¿æ¥DEï¼Œå¹¶åœ¨DEä¸Šæ‰¾å‡ºä¸€ç‚¹Fï¼Œä½¿å¾—DF/DE = AD/AB = BE/BCã€‚ç„¶åï¼Œæ ¹æ®æˆ‘ä»¬é«˜ä¸­æ‰€å­¦çš„æé™çš„çŸ¥è¯†ï¼Œè®©é€‰å–çš„ç‚¹Dåœ¨ç¬¬ä¸€æ¡çº¿æ®µä¸Šä»èµ·ç‚¹Aï¼Œç§»åŠ¨åˆ°ç»ˆç‚¹Bï¼Œæ‰¾å‡ºæ‰€æœ‰ç‚¹Fï¼Œå¹¶å°†å®ƒä»¬è¿èµ·æ¥ã€‚æœ€åä½ ä¼šå‘ç°ï¼Œä½ å¾—åˆ°äº†ä¸€æ¡éå¸¸å…‰æ»‘çš„æ›²çº¿ï¼Œè¿™æ¡å°±æ˜¯ä¼ è¯´ä¸­çš„ï¼Œè´å¡å°”æ›²çº¿ã€‚çœ‹è¿™é‡Œâ€¦ è¿™æ˜¯äºŒé˜¶è´å¡å°”æ›²çº¿ã€‚ ä¸‹é¢æ˜¯ä¸‰é˜¶å››é˜¶å’Œäº”é˜¶ã€‚ æœ€åæ˜¯â€¦ ä¸€é˜¶â€¦. æ‰€ä»¥è´å¡å°”æ›²çº¿çš„å‰å®³ä¹‹å¤„å°±åœ¨è¿™é‡Œï¼Œä»1-né˜¶çš„è¿ç»­å‡½æ•°ï¼Œä»–éƒ½å¯ä»¥è®¡ç®—å¾—åˆ°ä¸€æ¡å…‰æ»‘æ›²çº¿ã€‚ è´å¡å°”æ›²çº¿æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸ºä»€ä¹ˆç»å¸¸ä¼šå¬åˆ°è¿™ä¸ªåç§°ï¼Ÿç”±äºè´å¡å°”æ›²çº¿æ§åˆ¶ç®€ä¾¿ï¼Œè€Œä¸”å®ƒå…·æœ‰å¾ˆå¼ºçš„æè¿°èƒ½åŠ›ï¼Œå› æ­¤å®ƒåœ¨å·¥ä¸šè®¾è®¡ä¸Šå·²ç»è¢«å¹¿æ³›ä½¿ç”¨äº†ã€‚ä¸ä»…å¦‚æ­¤ï¼Œåœ¨è®¡ç®—æœºå›¾å½¢å­¦é¢†åŸŸï¼ˆç‰¹åˆ«æ˜¯çŸ¢é‡å›¾å½¢å­¦ï¼‰ï¼Œè´å¡å°”æ›²çº¿ä¹Ÿæœ‰ç€ä¸¾è¶³è½»é‡çš„åœ°ä½ã€‚è€Œä½œä¸ºç¨‹åºçŒ¿ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨è´å¡å°”æ›²çº¿æ¥ç»˜å›¾ï¼ˆç”±è´å¡å°”æ›²çº¿ç”»å‡ºæ¥çš„å›¾å¾ˆå…‰æ»‘~ï¼‰ï¼Œæ¥åšåŠ¨ç”»ï¼ˆå¾ˆè‡ªç„¶çš„åŠ¨ç”»ï¼‰ç­‰ç­‰ã€‚ä¹Ÿå°±æ˜¯ç”±äºå®ƒå¯ä»¥å‘æŒ¥çš„ä½œç”¨é¢†åŸŸå¤ªå¹¿äº†ï¼Œå› æ­¤æˆ‘ä»¬æ—¶ä¸æ—¶éƒ½ä¼šå¬åˆ°è¿™ä¸ªåå­—ã€‚ å¦‚ä½•ä½¿ç”¨è´å¡å°”æ›²çº¿ï¼Ÿé¦–å…ˆï¼Œè¦æ˜ç¡®çš„ä¸€ç‚¹æ˜¯ï¼Œå¯¹äºè´å¡å°”æ›²çº¿æ¥è¯´ï¼Œæœ€é‡è¦çš„ç‚¹æ˜¯ï¼Œæ•°æ®ç‚¹å’Œæ§åˆ¶ç‚¹ã€‚æ•°æ®ç‚¹ï¼š æŒ‡ä¸€æ¡è·¯å¾„çš„èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹ã€‚æ§åˆ¶ç‚¹ï¼šæ§åˆ¶ç‚¹å†³å®šäº†ä¸€æ¡è·¯å¾„çš„å¼¯æ›²è½¨è¿¹ï¼Œæ ¹æ®æ§åˆ¶ç‚¹çš„ä¸ªæ•°ï¼Œè´å¡å°”æ›²çº¿è¢«åˆ†ä¸ºä¸€é˜¶è´å¡å°”æ›²çº¿ï¼ˆ0ä¸ªæ§åˆ¶ç‚¹ï¼‰ã€äºŒé˜¶è´å¡å°”æ›²çº¿ï¼ˆ1ä¸ªæ§åˆ¶ç‚¹ï¼‰ã€ä¸‰é˜¶è´å¡å°”æ›²çº¿ï¼ˆ2ä¸ªæ§åˆ¶ç‚¹ï¼‰ç­‰ç­‰ã€‚è€Œç³»ç»Ÿç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå«åšUIBezierPathç±»ï¼Œç”¨å®ƒå¯ä»¥ç”»ç®€å•çš„åœ†å½¢ï¼Œæ¤­åœ†ï¼ŒçŸ©å½¢ï¼Œåœ†è§’çŸ©å½¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ ç‚¹å»ç”Ÿæˆä»»æ„çš„å›¾å½¢ï¼Œè¿˜å¯ä»¥ç®€å•çš„åˆ›å»ºä¸€æ¡äºŒé˜¶è´å¡å°”æ›²çº¿å’Œä¸‰é˜¶è´å¡å°”æ›²çº¿ã€‚ ç”¨æ³•1ï¼šç®€å•åœ°ç”»å›¾å½¢è¿™é‡Œçš„ç®€å•ç”¨æ³•å°±ä¸ç»†è®²ï¼Œè™½ç„¶ç±»åå«UIBezierPathï¼Œä½†ç”»åœ†å½¢å•¥çš„è·Ÿè´å¡å°”ä¹Ÿæ²¡å•¥å…³ç³»ï¼Œç›´æ¥è´´ä»£ç ã€‚ ç”»åœ†å½¢ 12345UIBezierPath *bPath = [UIBezierPath bezierPathWithArcCenter:CGPointMake(300, 300) radius:50 startAngle: DEGREES_TO_RADIANS(135) endAngle:M_PI*2 clockwise:YES]; [bPath setLineWidth:5]; //ç»˜åˆ¶ [bPath stroke]; ç”»æ¤­åœ† 123UIBezierPath *ovalPath = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(200, 150, 100, 200)]; [ovalPath setLineWidth:5]; [ovalPath stroke]; ç”»çŸ©å½¢ 12345UIBezierPath *myBezierPath = [UIBezierPath bezierPathWithRect:CGRectMake(20, 20, 100, 50)]; [[UIColor blackColor]setStroke]; [myBezierPath setLineWidth:5]; [myBezierPath stroke]; ç”»åœ†è§’çŸ©å½¢ 1234567//UIRectCornerå¯ä»¥è®¾ç½® å“ªå‡ ä¸ªè§’æ˜¯åœ†è§’ï¼Œå…¶ä»–ä¸å˜ UIBezierPath *tBPath = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(220, 20, 100, 100) byRoundingCorners:UIRectCornerTopLeft | UIRectCornerBottomLeft cornerRadii:CGSizeMake(20, 20)]; [[UIColor greenColor]setStroke]; [tBPath setLineWidth:5]; [tBPath stroke]; é€šè¿‡ä»»æ„ç‚¹ç”»ä»»æ„å›¾å½¢ 1234567891011121314151617181920212223UIBezierPath* aPath = [UIBezierPath bezierPath];aPath.lineWidth = 15.0; aPath.lineCapStyle = kCGLineCapButt; //çº¿æ¡ç»ˆç‚¹ //round åœ†å½¢ //butt å¹³çš„ é»˜è®¤å€¼ æŠŠçº¿è¿æ¥åˆ°ç²¾å‡†çš„ç»ˆç‚¹ //Square å¹³çš„ï¼Œä¼šæŠŠçº¿å»¶ä¼¸åˆ°ç»ˆç‚¹å†åŠ ä¸Šçº¿å®½çš„ä¸€åŠ aPath.lineJoinStyle = kCGLineJoinBevel; //æ‹ç‚¹å¤„ç† //bevel æ–œè§’æ–œé¢ï¼Œè§’çš„å¤–ä¾§æ˜¯å¹³çš„ä¸åœ†æ»‘ //miter æ–œæ¥ è§’çš„å¤–ä¾§æ˜¯å°–çš„ //round åœ†è§’ //è¿™æ˜¯èµ·ç‚¹ [aPath moveToPoint:CGPointMake(100.0, 200.0)]; //æ·»åŠ ç‚¹ [aPath addLineToPoint:CGPointMake(200.0, 240.0)]; [aPath addLineToPoint:CGPointMake(160, 340)]; [aPath addLineToPoint:CGPointMake(40.0, 340)]; [aPath addLineToPoint:CGPointMake(10.0, 240.0)]; [aPath closePath]; //ç¬¬äº”æ¡çº¿é€šè¿‡è°ƒç”¨closePathæ–¹æ³•å¾—åˆ°çš„ [aPath stroke]; //Draws line æ ¹æ®åæ ‡ç‚¹è¿çº¿ ç”»äºŒé˜¶è´å¡å°” 12345678910UIBezierPath* twoPath = [UIBezierPath bezierPath]; twoPath.lineWidth = 5.0;//å®½åº¦ twoPath.lineCapStyle = kCGLineCapRound; //çº¿æ¡æ‹è§’ twoPath.lineJoinStyle = kCGLineJoinRound; //ç»ˆç‚¹å¤„ç† //èµ·å§‹ç‚¹ [twoPath moveToPoint:CGPointMake(20, 100)]; //æ·»åŠ ä¸¤ä¸ªæ§åˆ¶ç‚¹ [twoPath addQuadCurveToPoint:CGPointMake(220, 100) controlPoint:CGPointMake(170, 0)]; //åˆ’çº¿ [twoPath stroke]; ç”»ä¸‰é˜¶è´å¡å°”1234567891011UIBezierPath* bPath = [UIBezierPath bezierPath]; bPath.lineWidth = 5.0; bPath.lineCapStyle = kCGLineCapRound; //çº¿æ¡æ‹è§’ bPath.lineJoinStyle = kCGLineCapRound; //ç»ˆç‚¹å¤„ç† //èµ·å§‹ç‚¹ [bPath moveToPoint:CGPointMake(20, 250)]; //æ·»åŠ ä¸¤ä¸ªæ§åˆ¶ç‚¹ [bPath addCurveToPoint:CGPointMake(350, 250) controlPoint1:CGPointMake(310, 200) controlPoint2:CGPointMake(210, 400)]; [bPath stroke]; ç”¨æ³•2ï¼šç”¨è´å¡å°”æ›²çº¿åœ†æ»‘ç»˜å›¾è¿™ä¸ªç”¨æ³•å¯ä»¥è¯´æ˜¯å¤„å¥³åº§çš„ç¦éŸ³ã€‚å‡è®¾è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼šäº§å“æäº†ä¸ªéœ€æ±‚ï¼Œæ¥å§ï¼Œå’±ä»¬æ¥åšä¸€ä¸ªä½ ç”»æˆ‘çŒœçš„APPã€‚ä½ ç”»æˆ‘çŒœï¼Ÿè‚¯å®šæ˜¯è¦å…ˆæœ‰ç”»äº†ã€‚ç®€å•ï¼æ–°å»ºä¸ªUIViewçš„å­ç±»ï¼Œç„¶ååœ¨å®ƒçš„åˆå§‹åŒ–æ–¹æ³•ä¸­åˆ›å»ºPathå’Œæ‰‹åŠ¿ã€‚ 123456// Create a path to connect linespath = [UIBezierPath bezierPath];// Capture touchesUIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];pan.maximumNumberOfTouches = pan.minimumNumberOfTouches = 1;[self addGestureRecognizer:pan]; å†å°†æ•è·åˆ°çš„panäº‹ä»¶locationæ•°æ®ä¾æ¬¡åŠ å…¥åˆ°pathä¸­ï¼Œå¹¶ä¸”ç”¨ç›´çº¿è¿æ¥ä¸¤ç‚¹ã€‚ 123456789- (void)pan:(UIPanGestureRecognizer *)pan &#123; CGPoint currentPoint = [pan locationInView:self]; if (pan.state == UIGestureRecognizerStateBegan) &#123; [path moveToPoint:currentPoint]; &#125; else if (pan.state == UIGestureRecognizerStateChanged) &#123; [path addLineToPoint:currentPoint]; &#125; [self setNeedsDisplay];&#125; æœ€åç”»å‡ºè½¨è¿¹ã€‚ 1234- (void)drawRect:(CGRect)rect &#123; [[UIColor blackColor] setStroke]; [path stroke]; &#125; æœ€åå°†è¿™ä¸ªviewæ·»åŠ åˆ°æ§åˆ¶å™¨ä¸Šï¼Œå¾ˆå¼€å¿ƒçš„Command + Rï¼Œè®©ç¨‹åºè·‘èµ·æ¥ã€‚ å¼€å§‹ç”»~ç„¶åä½ å°±ä¼šå‘ç°ï¼Œç”»å‡ºæ¥çš„æ›²çº¿æ˜¯è¿™æ ·çš„ã€‚ã€‚ WHAT THE FXXK!!æ€ä¹ˆå¯ä»¥æœ‰è¿™ä¹ˆå¤šé”¯é½¿ã€‚ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œè´å¡å°”æ›²çº¿å°±å¾ˆæœ‰ç”¨äº†ã€‚å®ƒçš„å®šä¹‰æ˜¯å¯ä»¥æ‰¾åˆ°ä¸¤ç‚¹ä¹‹é—´çš„å…‰æ»‘æ›²çº¿ï¼Œå› ä¸ºæˆ‘ä»¬ä¹‹å‰æ‰‹åŠ¿ç§»åŠ¨çš„æ—¶å€™ï¼Œä¸¤ç‚¹ä¹‹é—´éƒ½æ˜¯ä½¿ç”¨ç›´çº¿è¿æ¥ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è´å¡å°”æ›²çº¿è¿æ¥ï¼Œé‚£åº”è¯¥å°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜äº†ã€‚è¯•ä¸€ä¸‹ã€‚é¦–å…ˆå†™ä¸€ä¸ªè®¡ç®—ä¸­ç‚¹çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åˆ°æ—¶ä¼šä½¿ç”¨è¿™ä¸ªä¸­ç‚¹ä½œä¸ºæ§åˆ¶ç‚¹ã€‚ 123456static CGPoint midpoint(CGPoint p0, CGPoint p1) &#123; return (CGPoint) &#123; (p0.x + p1.x) / 2.0, (p0.y + p1.y) / 2.0 &#125;; &#125; æœ€åå°†æ‰‹åŠ¿å¤„ç†ä¸­çš„è¿æ¥æ–¹å¼æ›¿æ¢æˆä½¿ç”¨è´å¡å°”æ›²çº¿ã€‚ 123456789101112- (void)pan:(UIPanGestureRecognizer *)pan &#123; CGPoint currentPoint = [pan locationInView:self]; CGPoint midPoint = midpoint(previousPoint, currentPoint); if (pan.state == UIGestureRecognizerStateBegan) &#123; [path moveToPoint:currentPoint]; &#125; else if (pan.state == UIGestureRecognizerStateChanged) &#123; [path addQuadCurveToPoint:midPoint controlPoint:previousPoint]; &#125; previousPoint = currentPoint; [self setNeedsDisplay]; &#125; å†Runä¸€æ¬¡â€¦ çœ‹ï¼Œå…‰æ»‘å¤šäº†~æ‰€ä»¥å¾ˆå¤šæ—¶å€™ï¼Œå½“æˆ‘ä»¬é‡åˆ°ç”»å‡ºçš„å›¾å½¢å¤ªä¸è‡ªç„¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥è¯•ç€ç”¨è´å¡å°”æ›²çº¿è§£å†³è¿™äº›é—®é¢˜ï¼Œç”¨åˆ°è¶Šé«˜é˜¶çš„æ›²çº¿ï¼Œç”»å‡ºçš„å›¾å½¢è¶Šå…‰æ»‘ã€‚ ç”¨æ³•3ï¼šç”¨è´å¡å°”æ›²çº¿åšå˜å½¢ç½‘ä¸Šçœ‹åˆ°çš„å¤§å¤šæ•°æ¯”è¾ƒé…·ç‚«çš„åŠ¨ç”»ï¼Œéƒ½æ˜¯é€šè¿‡ä¿®æ”¹æ›²çº¿çš„æ§åˆ¶ç‚¹ï¼Œå¯¹æ›²çº¿è¿›è¡Œå˜å½¢è€Œåšçš„ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦å®ç°å¦‚ä¸‹ä¸€ä¸ªåŠ¨ç”»ã€‚ è¿™ä¸ªåŠ¨ç”»æœ€éš¾åœ°æ–¹å°±æ˜¯æ‰‹åŠ¿æ‹–æ‹½çš„æ—¶å€™ï¼Œç›´çº¿çš„å˜å½¢ï¼Œå¯ä»¥é¦–å…ˆçš„æƒ³åˆ°çš„æ˜¯ä½¿ç”¨è´å¡å°”ã€‚é€šè¿‡åˆ›å»ºpathï¼Œæ·»åŠ æ§åˆ¶ç‚¹ç”»å‡ºæ›²çº¿ï¼Œç„¶åé€šè¿‡æ›´æ”¹æ§åˆ¶ç‚¹çš„ä½ç½®æ¥è¾¾åˆ°è®©æ›²çº¿è¿›è¡Œå˜å½¢çš„ç›®çš„ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™é‡Œæ·»åŠ äº†7ä¸ªç‚¹ï¼Œä»å·¦åˆ°å³ä¾æ¬¡ä¸ºl3ã€l2ã€l1ã€cã€ r1ã€ r2ã€ r3ã€‚å±å¹•æœ€å·¦å’Œæœ€å³ä¸¤è¾¹çš„l3å’Œr3æ²¡æœ‰åœ¨å›¾ä¸­æ˜¾ç¤ºå‡ºæ¥ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ä»¥l3å’Œl2ä¸ºæ§åˆ¶ç‚¹ï¼Œä»l3åˆ°l1å»ºç«‹ä¸€æ¡äºŒé˜¶è´å¡å°”æ›²çº¿ï¼Œå†ä»¥cå’Œr1ä¸ºæ§åˆ¶ç‚¹å»ºä¸€æ¡ä»l3åˆ°r1çš„æ›²çº¿ï¼Œæœ€åä»¥r1å’Œr2ä¸ºæ§åˆ¶ç‚¹å»ºä¸€æ¡ä»r1åˆ°r3çš„æ›²çº¿ã€‚ ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819- (CGPathRef)currentPath &#123; CGFloat width = self.view.bounds.size.width; UIBezierPath *path = [UIBezierPath bezierPath]; [path moveToPoint:CGPointMake(0, 0)]; [path addLineToPoint:CGPointMake(0, self.l3ControlPointView.center.y)]; [path addCurveToPoint:self.l1ControlPointView.center controlPoint1:self.l3ControlPointView.center controlPoint2:self.l2ControlPointView.center]; [path addCurveToPoint:self.r1ControlPointView.center controlPoint1:self.cControlPointView.center controlPoint2:self.r1ControlPointView.center]; [path addCurveToPoint:self.r3ControlPointView.center controlPoint1:self.r1ControlPointView.center controlPoint2:self.r2ControlPointView.center]; [path addLineToPoint:CGPointMake(width, 0)]; [path closePath]; return path.CGPath; &#125; å»ºç«‹å¥½è·¯å¾„ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡æ‰‹åŠ¿æ“ä½œæ¥ä¿®æ”¹æ§åˆ¶ç‚¹çš„åæ ‡è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„äº†ã€‚åœ¨è¿™é‡Œä¹Ÿå°±æ˜¯ä¿®æ”¹l3åˆ°r3çš„ä¸­å¿ƒç‚¹åæ ‡ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637- (void)panDidMove:(UIPanGestureRecognizer *)gesture &#123; if (gesture.state == UIGestureRecognizerStateEnded || gesture.state == UIGestureRecognizerStateFailed || gesture.state == UIGestureRecognizerStateCancelled) &#123; &#125; else &#123; CGFloat additionalHeight = MAX([gesture translationInView:self.view].y, 0); CGFloat waveHeight = MIN(additionalHeight*0.6, kMaxWaveHeight); CGFloat baseHeight = kMiniHeight + additionalHeight - waveHeight; CGFloat locationX = [gesture locationInView:gesture.view].x; [self layoutControlPoints:baseHeight waveHeight:waveHeight locationX:locationX]; [self updateShapeLayer]; &#125; &#125; - (void)layoutControlPoints:(CGFloat)baseHeight waveHeight:(CGFloat)waveHeight locationX:(CGFloat)locationX &#123; CGFloat width = self.view.bounds.size.width; CGFloat minLeftX = MIN(locationX-width/2*0.28, 0); CGFloat maxRightX = MAX(width+(locationX-width)/2 *0.28, width); CGFloat leftPartWidth = locationX - minLeftX; CGFloat rightPartWidth = maxRightX - locationX; self.l3ControlPointView.center = CGPointMake(minLeftX, baseHeight); self.l2ControlPointView.center = CGPointMake(minLeftX+leftPartWidth*0.44, baseHeight); self.l1ControlPointView.center = CGPointMake(minLeftX+leftPartWidth*0.71, baseHeight+waveHeight*0.64); self.cControlPointView.center = CGPointMake(locationX, baseHeight+waveHeight*1.36); self.r1ControlPointView.center = CGPointMake(maxRightX-rightPartWidth*0.71, baseHeight+waveHeight*0.64); self.r2ControlPointView.center = CGPointMake(maxRightX-(rightPartWidth*0.44), baseHeight); self.r3ControlPointView.center = CGPointMake(maxRightX, baseHeight); &#125; - (void)updateShapeLayer &#123; self.shapeLayer.path = [self currentPath]; &#125; é€šè¿‡è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥åšå‡ºå¾ˆå¤šæœ‰æ„æ€è€Œä¸”æœ‰ç”Ÿå‘½åŠ›çš„åŠ¨ç”»ï¼Œè¿™é‡Œä¸€èˆ¬è¿˜ä¼šç»å¸¸å’Œ CADisplayLink ä¸€èµ·ç”¨ï¼Œå…ˆç•™ä¸ªå‘ã€‚ ç”¨æ³•4ï¼šç”¨è´å¡å°”æ›²çº¿åšç¼“å†²åŠ¨ç”»åšåŠ¨ç”»æœ€ä¸»è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯è¦è®©åŠ¨ç”»è¾¾åˆ°å¾ˆè‡ªç„¶çš„æ•ˆæœã€‚è¿™å°±è¦æ¶‰åŠåˆ°ä¸€äº›ç°å®ä¸­çš„ç‰©ç†çŸ¥è¯†ï¼Œæ¯”å¦‚é‡åŠ›å¼¹åŠ›å’Œé€Ÿåº¦ç­‰ç­‰ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹åŠ¨ç”»çš„é€Ÿåº¦è¿›è¡Œæ§åˆ¶ï¼Œæœ‰æ—¶å€™éœ€è¦å…ˆå¿«å†æ…¢ï¼Œæœ‰æ—¶å€™éœ€è¦å…ˆæ…¢å†å¿«ç„¶åå†æ…¢ï¼Œæœ‰æ—¶å€™åˆéœ€è¦å¿«æ…¢è¶…æ…¢éå¸¸æ…¢â€¦è¿™ä¸ªæ—¶å€™å°±ä¸å¾—ä¸æåˆ° CAMediaTimingFunction ã€‚CAMediaTimingFunction çš„ä¸»è¦ç”¨æ³•å¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬åœ¨ä¸€ä¸ªäºŒç»´åæ ‡ç³»ä¸Šå»ºè®®ä¸€æ¡æˆ–æ›²çº¿æˆ–ç›´çº¿çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„æ–œç‡å°±æ˜¯åŠ¨ç”»çš„é€Ÿåº¦ï¼Œæ–œç‡çš„æ”¹å˜é‡ä¹Ÿå°±æ˜¯å¯¼æ•°åˆ™ä¸ºåŠ é€Ÿåº¦ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œè¿™ä¸ªåæ ‡ç³»ä¸Šçš„ä»»ä½•æ›²çº¿éƒ½å¯ä»¥ç”¨æ¥å½“åšåŠ é€ŸåŠ¨ç”»ã€‚ç„¶è€ŒCAMediaTimingFunction åªç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„å‡½æ•°ï¼Œå®ƒå¯ä»¥ç”Ÿæˆä¸‰æ¬¡è´å¡å°”æ›²çº¿æ‰€èƒ½ç”Ÿæˆçš„æ‰€æœ‰ç¼“å†²å‡½æ•°ã€‚è¿™é‡Œåˆšå¥½å¯ä»¥ä»‹ç» ä¸€ä¸ª ä¸¤ä¸ªå¥½ç”¨çš„ç½‘ç«™ï¼š http://www.roblaplaca.com/examples/bezierBuilderè¿™ä¸ªç½‘ç«™å¯ä»¥åšåˆ°å¯è§†åŒ–çš„ä¿®æ”¹ä¸¤ä¸ªæ§åˆ¶ç‚¹ï¼Œæ¥è¾¾åˆ°ç”Ÿæˆä¸€æ¡ä¸‰é˜¶è´å¡å°”æ›²çº¿ï¼Œå¹¶ä¸”è¿˜ä¼šç»™å‡ºä¸¤ä¸ªæ§åˆ¶ç‚¹çš„å…·ä½“åæ ‡ï¼Œä»¥åŠå³è¾¹è¿˜å¯ä»¥çœ‹åˆ°è¿™æ¡æ›²çº¿äº§ç”Ÿçš„åŠ¨ç”»ä¼šåšæ€æ ·çš„é€Ÿåº¦æ”¹å˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æˆ‘ä»¬èƒ½æ‹¿åˆ°ä¸¤ä¸ªæ§åˆ¶ç‚¹çš„åæ ‡ï¼Œå°±å¯ä»¥ç”¨æ¥æ§åˆ¶åŠ¨ç”»äº†ã€‚http://easings.netè¿™ä¸ªç½‘ç«™æä¾›äº†ä¸°å¯Œçš„æ›²çº¿ç±»å‹å¯ä¾›é€‰æ‹©ï¼Œå›¾è¡¨æ—è¿˜æœ‰ä¸€ä¸ªå°åŠ¨ç”»é¢„è§ˆï¼Œéå¸¸ç›´è§‚ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œå°±å¯ä»¥è®©æˆ‘ä»¬æŠŠç›¸å†Œä»4ï¼š3 åˆ‡æ¢åˆ°1ï¼š1 çš„æ—¶å€™ï¼Œå±•ç¤ºä¸€ä¸ªå…ˆå¿«åæ…¢çš„è¿‡æ¸¡æ•ˆæœï¼Œè¿™ä¸ªæ•ˆæœè·Ÿç³»ç»Ÿç›¸æœºçš„è¿˜æ˜¯è›®æ¥è¿‘çš„ã€‚ 12345678910CABasicAnimation *animation = [CABasicAnimation animation];animation.keyPath = @\"borderWidth\";animation.repeatCount = 1;animation.duration = 0.4;animation.removedOnCompletion = NO;animation.timingFunction = [CAMediaTimingFunction functionWithControlPoints:0 :1 :1 :1];animation.fillMode = kCAFillModeForwards;animation.fromValue = 0.f;animation.toValue = 40.f;[self.previewMask addAnimation:animation forKey:@\"changeBorderWith\"]; æ•ˆæœå¦‚ä¸‹ï¼š ç”¨æ³•5ï¼šç”¨è´å¡å°”æ›²çº¿åšæ‹Ÿåˆè®¡ç®—è´å¡å°”æ›²çº¿æœ‰ä¸ªéå¸¸å¸¸ç”¨çš„åŠ¨ç”»æ•ˆæœï¼Œå«MetaBallç®—æ³•ã€‚ä»€ä¹ˆæ˜¯MetaBallï¼Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶çœ‹åˆ°çš„QQçš„å°çº¢ç‚¹æ¶ˆé™¤å•¦~ åƒä¸‹é¢è¿™æ ·ã€‚ è¿™ä¸ªæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ çŸ©å½¢æ‹Ÿåˆé¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹ç®€å•çš„çŸ©å½¢æ‹ŸåˆåŸç† å¦‚å›¾æ‰€ç¤ºçš„ä¸¤ä¸ªåœ†ï¼Œæˆ‘ä»¬é€šè¿‡ç»™å®ƒæ·»åŠ ä¸€ä¸ªçŸ©å½¢ï¼ˆç»¿è‰²éƒ¨åˆ†ï¼‰ï¼ŒçŸ©å½¢è¾ƒçŸ­çš„ä¸¤è¾¹åˆ†åˆ«é¡¶ä½ä¸¤ä¸ªåœ†å„è‡ªçš„ä¸€æ¡ç›´å¾„ä¸Šï¼Œç„¶åé€šè¿‡æ”¹å˜çŸ©å½¢è¾ƒé•¿çš„ä¸¤è¾¹çš„å¼§åº¦ï¼ˆçº¢è‰²éƒ¨åˆ†ï¼‰ï¼Œè¾¾åˆ°æ‹Ÿåˆçš„æ•ˆæœã€‚ è¿™ç§åšæ³•å½“ä¸¤ä¸ªåœ†è¾ƒå°çš„æ—¶å€™ï¼Œå‡ ä¹æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯å½“åœ†ç¨å¾®å¤§ç‚¹çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°å¾ˆæ˜æ˜¾çš„ç›¸äº¤åŒºåŸŸï¼Œæ‹Ÿåˆæ•ˆæœéå¸¸ä¸å¥½ã€‚ æ‰€ä»¥è¿™ç§ç®€å•çš„çŸ©å½¢æ‹Ÿåˆåœ¨åœ†è¾ƒå¤§çš„æ—¶å€™æ˜¯å¾ˆä¸ä¸¥æ ¼çš„ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦æ›´ä¸¥è°¨çš„åˆ‡çº¿æ‹Ÿåˆã€‚ åˆ‡çº¿æ‹Ÿåˆæˆ‘ä»¬çŸ¥é“ï¼Œä¹‹å‰çš„çŸ©å½¢æ‹Ÿåˆä¹‹æ‰€ä»¥æ‰åœ†å¤§çš„æ—¶å€™ä¼šå‡ºç°æ‹Ÿåˆä¸ä¸¥è°¨çš„æƒ…å†µã€‚ä¸ºä»€ä¹ˆï¼Ÿ æ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸¤æ¡æ›²çº¿çš„ç”»æ³•éƒ½æ˜¯ç”±A1å’ŒB1ä¸ºèµ·ç‚¹å’Œç»ˆç‚¹ï¼ŒCç‚¹ä¸ºæ§åˆ¶ç‚¹å’ŒA1ã€B2ä¸ºèµ·ç‚¹å’Œç»ˆç‚¹ï¼ŒCä¸ºæ§åˆ¶ç‚¹ç”»å‡ºçš„äºŒé˜¶è´å¡å°”æ›²çº¿ã€‚è€Œè¦åšåˆ°å®Œç¾çš„æ‹Ÿåˆï¼Œå¿…é¡»è¾¾åˆ°çš„ä¸€ç‚¹è¦æ±‚å°±æ˜¯ï¼Œè´å¡å°”æ›²çº¿ä¸åœ†çš„è¿æ¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯A1ã€B1ã€A2ã€B2ï¼Œä»–ä»¬ä¸æ§åˆ¶ç‚¹Cçš„è¿çº¿ï¼Œä¸€å®šè¦æ˜¯åœ†çš„åˆ‡çº¿ã€‚è¿™æ ·å°±ä¸ç®¡åœ†å¤§å°æ€ä¹ˆå˜ï¼Œéƒ½ä¸ä¼šå‡ºç°æ˜æ˜¾çš„ç›¸äº¤åŒºåŸŸäº†ã€‚ å›¾ç‰‡å¼•ç”¨: http://www.jianshu.com/p/55c721887568 äºæ˜¯ï¼Œç°åœ¨è§£å†³é—®é¢˜çš„å…³é”®å°±è½¬å˜æˆäº†ï¼šå¦‚ä½•è®¡ç®—è¿™äº›æ‹Ÿåˆçš„å…³é”®ç‚¹ï¼Ÿ å›¾ç‰‡å¼•ç”¨: http://pandara.xyz/2015/10/27/ios_slime æˆ‘ä»¬ç°åœ¨è¦åšçš„ï¼Œå°±æ˜¯æ±‚å‡ºç‚¹ABCDMNè¿™å…­ä¸ªç‚¹çš„åæ ‡ï¼Œå°±å¯ä»¥å®ç°å®Œç¾æ‹Ÿåˆäº†ã€‚ç»“åˆä¸Šé¢ä¸¤å¼ å›¾ï¼Œé€šè¿‡ä¸‰è§’å‡½æ•°çš„å„ç§è®¡ç®—ï¼Œæˆ‘ä»¬æœ€ç»ˆå¯ä»¥å¾—åˆ°å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930- (void)reloadBezierPath &#123; CGFloat r1 = self.trailDot.frame.size.width / 2.0f; CGFloat r2 = self.headDot.frame.size.width / 2.0f; CGFloat x1 = self.trailDot.center.x; CGFloat y1 = self.trailDot.center.y; CGFloat x2 = self.headDot.center.x; CGFloat y2 = self.headDot.center.y; CGFloat distance = sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1)); CGFloat sinDegree = (x2 - x1) / distance; CGFloat cosDegree = (y2 - y1) / distance; CGPoint pointA = CGPointMake(x1 - r1 * cosDegree, y1 + r1 * sinDegree); CGPoint pointB = CGPointMake(x1 + r1 * cosDegree, y1 - r1 * sinDegree); CGPoint pointC = CGPointMake(x2 + r2 * cosDegree, y2 - r2 * sinDegree); CGPoint pointD = CGPointMake(x2 - r2 * cosDegree, y2 + r2 * sinDegree); CGPoint pointN = CGPointMake(pointB.x + (distance / 2) * sinDegree, pointB.y + (distance / 2) * cosDegree); CGPoint pointM = CGPointMake(pointA.x + (distance / 2) * sinDegree, pointA.y + (distance / 2) * cosDegree); UIBezierPath *path = [UIBezierPath bezierPath]; [path moveToPoint:pointA]; [path addLineToPoint:pointB]; [path addQuadCurveToPoint:pointC controlPoint:pointN]; [path addLineToPoint:pointD]; [path addQuadCurveToPoint:pointA controlPoint:pointM]; self.shapeLayer.path = path.CGPath; &#125; ç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥åšåˆ°éå¸¸å®Œç¾æ‹Ÿåˆçš„æ—¶å€™äº†ï¼Œè¿™æ—¶å€™å†ç»“åˆå‰é¢çš„é€šè¿‡ä¿®æ”¹æ§åˆ¶ç‚¹æ¥å®ç°å›¾å½¢æ›²çº¿å˜æ¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥åšåˆ°ç±»ä¼¼QQå°çº¢ç‚¹æ¶ˆé™¤ä¸€æ ·çš„æ•ˆæœäº†ï¼Œå…·ä½“åšæ³•ä¸å†èµ˜è¿°ã€‚ Endingè‡³æ­¤ï¼Œæˆ‘ä»¬å·²åŸºæœ¬äº†è§£äº†è´å¡å°”æ›²çº¿çš„å†å²å‡ºå¤„å…¬å¼æ€§è´¨åŠå„ç§ç”¨æ³•ã€‚åœ¨ä¸æ–­å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ä¸€äº›æ¯”è¾ƒç‰›é€¼çš„å®ç°æ–¹æ³•ï¼Œéƒ½æ¶‰åŠåˆ°äº†è¾ƒå¤šè¾ƒå¤æ‚çš„æ•°å­¦å…¬å¼ï¼Œå¥ˆä½•å¤§å­¦é«˜æ•°æ²¡æœ‰å¥½å¥½å­¦ï¼Œå¯¼è‡´éœ€è¦å›å¤´å»çœ‹å¾ˆå¤šä¸œè¥¿ï¼Œè¿™ä¹Ÿæ˜¯è¿™ç¯‡åšå®¢è€—è´¹äº†è¾ƒå¤šæ—¶é—´çš„åŸå› ä¹‹ä¸€ã€‚ä¸è¿‡åœ¨æŒæ¡äº†è¿™äº›åŸºç¡€å’ŒåŸºæœ¬ç”¨æ³•ä¹‹åï¼Œå°±å¯ä»¥å†å»ç ”ç©¶ä¸€ä¸‹æ¯”è¾ƒé«˜çº§å’Œé…·ç‚«çš„ç”¨æ³•äº†ï¼Œä¹Ÿç•™ä¸‹äº†å¾ˆå¤šå‘ï¼Œä¼šåœ¨ä»¥åæ…¢æ…¢å¡«è¡¥çš„â€¦å¦‚æœä»¥åè¿˜æƒ³è¡¥çš„è¯â€¦.æ–‡ä¸­å¦‚æœæœ‰ä»€ä¹ˆä¸è¶³ä¹‹å¤„æ¬¢è¿æŒ‡æ­£ï¼Œè¿™ä¹Ÿæ˜¯Shareçš„ç›®çš„ä¹‹ä¸€ã€‚Have fun ~ å‚è€ƒé“¾æ¥è´å¡å°”æ›²çº¿ç»´åŸºç™¾ç§‘UIBezierPath Class Referenceè´å¡å°”æ›²çº¿æ‰«ç›²è‡ªå®šä¹‰ç¼“å†²å‡½æ•°iOS-UIè¿›é˜¶13 - è´å¡å°”æ›²çº¿å’Œå¸§åŠ¨ç”»ç»“åˆè´å¡å°”æ›²çº¿å¼€å‘çš„è‰ºæœ¯","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://shixiong.name/tags/iOS/"},{"name":"è´å¡å°”","slug":"è´å¡å°”","permalink":"https://shixiong.name/tags/è´å¡å°”/"},{"name":"åŠ¨ç”»","slug":"åŠ¨ç”»","permalink":"https://shixiong.name/tags/åŠ¨ç”»/"}]},{"title":"æ–­ç‚¹è°ƒè¯• autolayout","slug":"breakpoint-debug-autolayout","date":"2016-09-16T05:59:15.000Z","updated":"2019-07-30T02:17:17.769Z","comments":true,"path":"2016/09/16/breakpoint-debug-autolayout/","link":"","permalink":"https://shixiong.name/2016/09/16/breakpoint-debug-autolayout/","excerpt":"","text":"å¯¹äº iOS å’Œ OS X å¼€å‘è€…æ¥è¯´ï¼ŒAutolayoutå·²ç»é€æ¸å˜æˆä¸€ä¸ªè‡³å…³é‡è¦çš„å¼€å‘å·¥å…·ã€‚å®ƒè®©å¤šå±å¹•é€‚é…å˜å¾—å°èœä¸€ç¢Ÿ(peasy)ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™å®ƒè¿˜æ˜¯ä¼šæŠŠæˆ‘ä»¬æç–¯æ‰ï¼Œå› ä¸ºå®ƒæ€»æ˜¯ä¼šå‡ºç°é‚£äº›å•°å—¦åˆæ²¡å•¥ç”¨å¤„çš„é”™è¯¯è­¦å‘Šã€‚ å°±åƒè¿™æ ·: 12345678910111213Unable to simultaneously satisfy constraints.Probably at least one of the constraints in the following list is one you don't want.Try this:(1) look at each constraint and try to figure out which you don't expect;(2) find the code that added the unwanted constraint or constraints and fix it.(Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints)(...........)Make a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in &lt;UIKit/UIView.h&gt; may also be helpful. è¿™ä¹ˆé•¿çš„é”™è¯¯æ—¥å¿—ï¼ï¼ï¼ï¼å°¼ç›è®©è°çœ‹ï¼ï¼ï¼ ä½†æ˜¯æˆ‘ä»¬ä»”ç»†çœ‹ä¸€ä¸‹ï¼Œè§‚å¯Ÿ NSLayoutConstraint éƒ¨åˆ†ã€‚å‘ç°å®ƒå€’æ•°ç¬¬äºŒè¡Œè¿˜æ˜¯æœ‰ç»™æˆ‘ä»¬ç‚¹å¸Œæœ›å»è§£å†³è¿™ä¸ªé”™è¯¯çš„ã€‚åœ¨ UIViewAlertForUnsatisfiableConstraints æ·»åŠ ä¸€ä¸ªSymbolic breakpoint æ–­ç‚¹ã€‚æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å°±å»è¯•ä¸€ä¸‹â€¦ å°¼ç›ï¼ï¼ æ¯›ç”¨éƒ½æ²¡æœ‰å•Šï¼ï¼å®ƒåœåœ¨äº†çº¿ç¨‹å †æ ˆä¸Šï¼Œç„¶è€ŒLLDBä¾æ—§ä¸€ç‰‡é»‘æš—â€¦ äºæ˜¯è¿™é‡Œå°±æœ‰ä¸€ä¸ªå°æŠ€å·§(Trick)ï¼Œæ¥è®©ä½ çš„symbolic breakpointå˜å¾—æ›´åŠ æœ‰ç”¨ã€‚ä¸ºä½ çš„ObjCé¡¹ç›®æ·»åŠ  po [[UIWindow keyWindow] _autolayoutTrace] æˆ–è€…ä¸ºä½ çš„Swifté¡¹ç›®æ·»åŠ  expr -l objc++ -O -- [[UIWindow keyWindow] _autolayoutTrace] ç°åœ¨ä½ å°±ä¼šåœ¨å‘½ä»¤æ§åˆ¶å°çœ‹åˆ°ä½ çš„UIView çš„å±‚æ¬¡ç»“æ„è¿˜æœ‰å‡ºç°é”™è¯¯çš„åœ°æ–¹ã€‚ 12345UIWindow:0x7f9481c93360| â€¢UIView:0x7f9481c9d680| | *UIView:0x7f9481c9d990- AMBIGUOUS LAYOUT for UIView:0x7f9481c9d990.minX&#123;id: 13&#125;, UIView:0x7f9481c9d990.minY&#123;id: 16&#125;| | *_UILayoutGuide:0x7f9481c9e160- AMBIGUOUS LAYOUT for _UILayoutGuide:0x7f9481c9e160.minY&#123;id: 17&#125;| | *_UILayoutGuide:0x7f9481c9ebb0- AMBIGUOUS LAYOUT for _UILayoutGuide:0x7f9481c9ebb0.minY&#123;id: 27&#125; è€Œå½“ä½ åœ¨è¿™ä¸ªåœ°æ–¹ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå®ƒå°±ä¼šåœåœ¨ä¸‹ä¸€ä¸ªä½ å¯èƒ½å‡ºç°é”™è¯¯çš„åœ°æ–¹ã€‚ä½†æ˜¯å¦‚æœè¿™æ ·å­ä½ è¿˜æ˜¯å¾ˆéš¾å‘ç°ä½ çš„é”™è¯¯çš„è¯ï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹é¢è¿™ä¸ªè¯­å¥ 12(lldb) e id $myView = (id) 0x7f9ea3d43410(lldb) e (void)[$myView setBackgroundColor:[UIColor blueColor]] å…ˆè·å–UIViewï¼Œç„¶åæ”¹å˜å®ƒçš„èƒŒæ™¯è‰² ä½ å°±ä¼šçœ‹åˆ°å‡ºé”™è¯¯çš„è§†å›¾ä¸»åŠ¨æ˜¾ç¤ºå‡ºæ¥äº†~ ps: å¦‚æœæ˜¯æ‰‹å†™Autolayoutï¼Œæ¨è Mansoryï¼Œå®åœ¨æ˜¯å¥½ç”¨ï¼ï¼ å…³é”®æ˜¯å®ƒçš„é”™è¯¯æç¤º 12345678910Unable to simultaneously satisfy constraints......blah blah blah....( \"&lt;NSAutoresizingMaskLayoutConstraint:0x8887740 MASExampleDebuggingView:superview.height == 416&gt;\", \"&lt;MASLayoutConstraint:ConstantConstraint UILabel:messageLabel.height &gt;= 5000&gt;\", \"&lt;MASLayoutConstraint:BottomConstraint UILabel:messageLabel.bottom == MASExampleDebuggingView:superview.bottom - 10&gt;\", \"&lt;MASLayoutConstraint:ConflictingConstraint[0] UILabel:messageLabel.top == MASExampleDebuggingView:superview.top + 1&gt;\")Will attempt to recover by breaking constraint&lt;MASLayoutConstraint:ConstantConstraint UILabel:messageLabel.height &gt;= 5000&gt; å·²ç»æŠŠå‡ºç°é”™è¯¯çš„çº¦æŸæ˜¾ç¤ºå‡ºæ¥äº†ï¼Œå®Œå…¨ä¸éœ€è¦æˆ‘ä»¬å»èŒ«èŒ«å»å¶é‡~","categories":[],"tags":[{"name":"iOS","slug":"iOS","permalink":"https://shixiong.name/tags/iOS/"}]}]}